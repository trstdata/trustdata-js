var t;t=()=>{return t={158(t){!function(e,n){e.t=e.t||[],e.i=!1;const r={version:'3.0.2',debug:!1,endpoint:'https://t.trstdata.com/api/events',sessionTimeout:30,initialized:!1,attributionIds:[],cookieDomain:'',cookieSecure:!0,ignoreReferrerDomains:[]},i={clientId:null,userId:null,sessionId:null,sessionNumber:0,sessionEngaged:!1,isNewVisit:!1,isFirstVisit:!1,ignoreReferrer:!1,consentStatus:{analytics:!1,advertising:!1,personalization:!1},persistentParameters:{},initializedTargets:new Set};function o(){return Math.floor(Date.now()/1e3)}function a(t){try{return new URL(t||'').hostname}catch(e){return''}}const s={canUse:t=>!0===t.analytics,getCookie(t,e){if(!e||void 0===n){return null}const r=t+'=',i=n.cookie.split(';');for(let n=0;i.length>n;n++){let t=i[n];for(;' '===t.charAt(0);){t=t.substring(1,t.length)}if(0===t.indexOf(r)){return decodeURIComponent(t.substring(r.length,t.length))}}return null},setCookie(t,e,r,i,o,a){if(!i||void 0===n){return}let s='';if(r){const t=new Date;t.setTime(t.getTime()+24*r*60*60*1e3),s='; expires='+t.toUTCString()}const c=o?'; domain='+o:'',u=a?'; Secure':'';n.cookie=t+'='+encodeURIComponent(e)+s+c+'; path=/; SameSite=Lax'+u},getLocalStorage(t,e){if(!e){return null}try{return localStorage.getItem(t)}catch(n){return null}},setLocalStorage(t,e,n){if(n){try{localStorage.setItem(t,e)}catch(r){}}}},c={process(){if(!e.t||!e.t.length){return}const t={consent:1,config:2,set:3,event:4,get:5},n=e.t.slice();e.t.length=0,n.sort(((e,n)=>(t[Array.isArray(e)?e[0]:'']||999)-(t[Array.isArray(n)?n[0]:'']||999))),n.forEach((t=>{if(Array.isArray(t)){try{const e=t[0],n=t.slice(1);_[e]&&_[e].apply(_,n)}catch(e){}}}))},add(t){return e.t.push(t),e.i&&t&&t.length>0&&setTimeout(this.process,0),!0}};async function u(t){const s={},c={...t},u=c.event_name;delete c.event_name;const _={attribution_id:r.attributionIds,client_id:i.clientId,session_id:i.sessionId,session_number:i.sessionNumber,session_engaged:i.sessionEngaged?1:0,event_time:o()};i.userId&&(_.user_id=i.userId),Object.entries(_).forEach((([t,e])=>{c.hasOwnProperty(t)||(s[t]=e)})),i.isNewVisit&&!c.entrances&&(s.entrances=1),i.isFirstVisit&&!c.first_visit&&(s.first_visit=1);const d=a(e.location.href),l=a(n.referrer);if(l&&r.ignoreReferrerDomains.includes(l)&&(i.ignoreReferrer=!0),i.persistentParameters.page_referrer){const t=a(i.persistentParameters.page_referrer);d&&t&&d===t&&(i.ignoreReferrer=!0)}i.ignoreReferrer&&!c.ignore_referrer&&(s.ignore_referrer=!0),i.ignoreReferrer||!n.referrer||i.persistentParameters.page_referrer||c.page_referrer||(s.page_referrer=n.referrer);try{const t=new URLSearchParams(e.location.search);['utm_source','utm_medium','utm_campaign','utm_term','utm_content','trdt_cpid','trdt_agid','trdt_kwid','trdt_ctid'].forEach((e=>{const n=t.get(e);n&&!c[e]&&(s[e]=n)}))}catch(f){}if(!(i.persistentParameters.page_referrer||i.persistentParameters.page_loc||i.persistentParameters.page_tit||c.page_referrer||c.page_loc||c.page_tit)){const t={page_loc:n.location.href,page_tit:n.title,lang:(navigator&&(navigator.language||navigator.browserLanguage)||'').toLowerCase(),screen_res:(e.screen?e.screen.width:0)+'x'+(e.screen?e.screen.height:0)};Object.entries(t).forEach((([t,e])=>{c[t]||(s[t]=e)}))}Object.entries(i.persistentParameters).forEach((([t,e])=>{c[t]||void 0!==s[t]||(s[t]=e)})),c.consent_analytics||(s.consent_analytics=i.consentStatus.analytics),c.consent_advertising||(s.consent_advertising=i.consentStatus.advertising),c.consent_personalization||(s.consent_personalization=i.consentStatus.personalization);try{const t=await(void 0!==e&&'navigator'in e&&navigator?.userAgentData?.getHighEntropyValues?navigator.userAgentData.getHighEntropyValues(['platform','platformVersion','architecture','model','uaFullVersion','bitness','fullVersionList','wow64']).then((t=>({ua_arch:t.architecture,ua_bits:t.bitness,ua_fvl:encodeURIComponent((Object.values(t.fullVersionList)||navigator?.userAgentData?.brands).map((t=>[t.brand,t.version].join(';'))).join('|')),ua_mob:t.mobile?1:0,ua_mod:t.model||navigator?.userAgentData?.mobile,ua_plat:t.platform||navigator?.userAgentData?.platform,ua_pv:t.platformVersion,ua_w64:t.wow64?1:0}))).catch((()=>null)):Promise.resolve(null));t&&Object.entries(t).forEach((([t,e])=>{c[t]||void 0!==s[t]||(s[t]=e)}))}catch(f){}return Object.entries(c).forEach((([t,e])=>s[t]=e)),u&&(s.event_name=u),s}const _={config(t,n={}){return t&&!r.attributionIds.includes(t)&&r.attributionIds.push(t),n.ignoreReferrerDomains&&(r.ignoreReferrerDomains=Array.isArray(n.ignoreReferrerDomains)?n.ignoreReferrerDomains:[n.ignoreReferrerDomains]),Object.keys(n).forEach((t=>{t in r&&(r[t]=n[t])})),n.consent&&this.consent('update',{consent:n.consent}),((t={})=>{const e=s.canUse(i.consentStatus),n=t.client_id||s.getCookie('_t_cid',e)||s.getLocalStorage('_t_cid',e),a=s.getCookie('_t_fv',e)||s.getLocalStorage('_t_fv',e);if(n?(i.clientId=n,i.isFirstVisit=!a):(i.clientId=Math.floor(2147483647*Math.random())+'.'+Math.floor(Date.now()/1e3),i.isFirstVisit=!0,e&&(s.setCookie('_t_cid',i.clientId,365,e,r.cookieDomain,r.cookieSecure),s.setLocalStorage('_t_cid',i.clientId,e))),i.isFirstVisit&&e){const t=""+o();s.setCookie('_t_fv',t,365,e,r.cookieDomain,r.cookieSecure),s.setLocalStorage('_t_fv',t,e)}})(n),(()=>{const t=o(),e=s.canUse(i.consentStatus);if(e){const o=s.getCookie('_t_sid',e),a=s.getLocalStorage('_t_sn',e),c=s.getCookie('_t_last',e);if(i.sessionNumber=i.isFirstVisit?1:parseInt(a||'1'),!o||t-parseInt(c||'0')>60*r.sessionTimeout){i.sessionId=t,i.isFirstVisit||i.sessionNumber++,i.sessionEngaged=!1,i.isNewVisit=!0;try{s.setLocalStorage('_t_sn',""+i.sessionNumber,e),s.setCookie('_t_sid',""+i.sessionId,0,e,r.cookieDomain,r.cookieSecure),s.setCookie('_t_last',""+t,0,e,r.cookieDomain,r.cookieSecure)}catch(n){}}else{i.sessionId=parseInt(o),i.sessionEngaged=!0,i.isNewVisit=!1;try{s.setCookie('_t_last',""+t,0,e,r.cookieDomain,r.cookieSecure)}catch(n){}}}else{i.sessionId=t,i.sessionNumber=1,i.sessionEngaged=!1,i.isNewVisit=!0}})(),t&&i.initializedTargets.add(t),r.initialized||(r.initialized=!0,e.i=!0,setTimeout(c.process,0)),!1!==n.send_page_view&&setTimeout((()=>this.event('page_view',{send_to:t})),0),!0},set(t,e){if('object'==typeof t){return Object.entries(t).forEach((([t,e])=>this.set(t,e))),!0}e=((t,e=100)=>{if(null==t){return t}if('function'==typeof t){try{t=t()}catch(n){return null}}return'string'==typeof t?t.substring(0,e):t})(e,100);const n=s.canUse(i.consentStatus);switch(t){case'user_id':i.userId=e,n&&(s.setCookie('_t_uid',e,365,n,r.cookieDomain,r.cookieSecure),s.setLocalStorage('_t_uid',e,n));break;case'client_id':i.clientId=e,n&&(s.setCookie('_t_cid',e,365,n,r.cookieDomain,r.cookieSecure),s.setLocalStorage('_t_cid',e,n));break;case'debug_mode':r.debug=!0===e||'true'===e;break;case'page_referrer':case'page_loc':case'page_tit':case'ignore_referrer':i.persistentParameters[t]=e,'ignore_referrer'===t&&(i.ignoreReferrer=!0===e||'true'===e);break;default:i.persistentParameters[t]=e}return!0},async event(t,e={}){if(!t){return!1}if(!r.initialized){return c.add(['event',t,e])}i.sessionEngaged=!0,e.hasOwnProperty('ignore_referrer')?(i.ignoreReferrer=!0===e.ignore_referrer,delete e.ignore_referrer):i.ignoreReferrer=!1,['page_referrer','page_loc','page_tit'].forEach((t=>{e.hasOwnProperty(t)&&(i.persistentParameters[t]=e[t],delete e[t])}));let n=r.attributionIds;e.send_to&&(n=Array.isArray(e.send_to)?e.send_to:[e.send_to],delete e.send_to);let a=n.filter((t=>i.initializedTargets.has(t)));0===a.length&&r.attributionIds.length>0&&(a=[r.attributionIds[0]]);const _=i.isFirstVisit,d=i.isNewVisit,l={...e,event_name:t},f=await u(l);a.forEach((t=>{const e={...f,attribution_id:t};((t,e)=>{try{fetch(t,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(e),keepalive:!0}).catch((()=>{fetch(t.replace('analytics.','api.').replace('track.','app.'),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({...e,recovery:!0}),keepalive:!0})}))}catch(n){}})(r.endpoint,e)})),_&&(i.isFirstVisit=!1),d&&(i.isNewVisit=!1);const p=s.canUse(i.consentStatus);if(p){try{s.setCookie('_t_last',""+o(),0,p,r.cookieDomain,r.cookieSecure)}catch(g){}}return!0},consent(t,e){if(!e||!e.hasOwnProperty('consent')){return!1}const n=e.consent;return'analytics'in n&&(i.consentStatus.analytics=!0===n.analytics||'granted'===n.analytics),'advertising'in n&&(i.consentStatus.advertising=!0===n.advertising||'granted'===n.advertising),'personalization'in n&&(i.consentStatus.personalization=!0===n.personalization||'granted'===n.personalization),!0},get(t,e,n){let o;switch(e){case'client_id':o=i.clientId;break;case'user_id':o=i.userId;break;case'session_id':o=i.sessionId;break;case'consent_status':o={...i.consentStatus};break;case'debug_mode':o=r.debug;break;default:o=i.persistentParameters[e]}return'function'==typeof n&&n(o),o}},d=[].push;e.t.push=function(){const t=d.apply(this,arguments);return e.i&&setTimeout(c.process,0),t},e.o=Object.assign((function(){const t=Array.from(arguments);if(0===t.length){return e.o}if(r.initialized&&'string'==typeof t[0]&&_[t[0]]){const e=t.shift();return _[e].apply(_,t)}return c.add(t)}),_),e.attrib=e.attrib||function(){const t=Array.from(arguments);if(e.i&&'string'==typeof t[0]&&_[t[0]]){const e=t.shift();return _[e].apply(_,t)}return c.add(t)},setTimeout((()=>{e.t&&e.t.length>0&&c.process()}),0),'function'==typeof navigator.sendBeacon&&e.addEventListener('beforeunload',(()=>{r.initialized&&e.t&&e.t.length>0&&e.t.forEach((t=>{'event'===t[0]&&u({...t[2]||{},event_name:t[1]}).then((t=>{r.attributionIds.forEach((e=>{((t,e)=>{if('function'!=typeof navigator.sendBeacon){return!1}try{navigator.sendBeacon(t,new Blob([JSON.stringify(e)],{type:'application/json'}))}catch(n){}})(r.endpoint,{...t,attribution_id:e})}))}))}))})),t.exports&&(t.exports=e.o)}(window,document)}},e={},function n(r){var i=e[r];if(void 0!==i){return i.exports}var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}(158).default;var t,e},'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports.AttributionCore=t():this.AttributionCore=t();