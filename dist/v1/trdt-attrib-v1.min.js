var e;e=()=>{return e={158(e){!function(window,document){window._trdt_uat=window._trdt_uat||{},window._trdt_uat_queue=window._trdt_uat_queue||[],window._trdt_uat_ready=!1;const CONFIG={version:'3.0.4',debug:!1,endpoint:'https://t.trstdata.com/api/events',sessionTimeout:30,initialized:!1,attributionIds:[],cookieDomain:'',cookieSecure:!0,ignoreReferrerDomains:[]},STATE={clientId:null,userId:null,sessionId:null,sessionNumber:0,sessionEngaged:!1,isNewVisit:!1,isFirstVisit:!1,ignoreReferrer:!1,consentStatus:{analytics:!1,advertising:!1,personalization:!1},persistentParameters:{},initializedTargets:new Set};function t(){return Math.floor(Date.now()/1e3)}function r(e){try{return new URL(e||'').hostname}catch(t){return''}}const n={canUse:consentStatus=>!0===consentStatus.analytics,getCookie(e,t){if(!t||void 0===document){return null}const r=e+'=',n=document.cookie.split(';');for(let i=0;n.length>i;i++){let e=n[i];for(;' '===e.charAt(0);){e=e.substring(1,e.length)}if(0===e.indexOf(r)){return decodeURIComponent(e.substring(r.length,e.length))}}return null},setCookie(e,t,r,n,i,s){if(!n||void 0===document){return}let a='';if(r){const e=new Date;e.setTime(e.getTime()+24*r*60*60*1e3),a='; expires='+e.toUTCString()}const o=i?'; domain='+i:'',c=s?'; Secure':'';document.cookie=e+'='+encodeURIComponent(t)+a+o+'; path=/; SameSite=Lax'+c},getLocalStorage(e,t){if(!t){return null}try{return localStorage.getItem(e)}catch(r){return null}},setLocalStorage(e,t,r){if(r){try{localStorage.setItem(e,t)}catch(n){}}}},i={process(){if(!window._trdt_uat_queue||!window._trdt_uat_queue.length){return}const e={consent:1,config:2,set:3,event:4,get:5},t=window._trdt_uat_queue.slice();window._trdt_uat_queue.length=0,t.sort(((t,r)=>(e[Array.isArray(t)?t[0]:'']||999)-(e[Array.isArray(r)?r[0]:'']||999))),t.forEach((e=>{if(Array.isArray(e)){try{const t=e[0],r=e.slice(1);API[t]&&API[t].apply(API,r)}catch(t){}}}))},add(e){return window._trdt_uat_queue.push(e),window._trdt_uat_ready&&e&&e.length>0&&setTimeout(this.process,0),!0}};async function s(e){const n={},i={...e},s=i.event_name;delete i.event_name;const a={attribution_id:CONFIG.attributionIds,client_id:STATE.clientId,session_id:STATE.sessionId,session_number:STATE.sessionNumber,session_engaged:STATE.sessionEngaged?1:0,event_time:t()};STATE.userId&&(a.user_id=STATE.userId),Object.entries(a).forEach((([e,t])=>{i.hasOwnProperty(e)||(n[e]=t)})),STATE.isNewVisit&&!i.entrances&&(n.entrances=1),STATE.isFirstVisit&&!i.first_visit&&(n.first_visit=1);const o=r(window.location.href),c=r(document.referrer);if(c&&CONFIG.ignoreReferrerDomains.includes(c)&&(STATE.ignoreReferrer=!0),STATE.persistentParameters.page_referrer){const e=r(STATE.persistentParameters.page_referrer);o&&e&&o===e&&(STATE.ignoreReferrer=!0)}STATE.ignoreReferrer&&!i.ignore_referrer&&(n.ignore_referrer=!0),STATE.ignoreReferrer||!document.referrer||STATE.persistentParameters.page_referrer||i.page_referrer||(n.page_referrer=document.referrer);try{const e=new URLSearchParams(window.location.search);['utm_source','utm_medium','utm_campaign','utm_term','utm_content','trdt_cpid','trdt_agid','trdt_kwid','trdt_ctid'].forEach((t=>{const r=e.get(t);r&&!i[t]&&(n[t]=r)}))}catch(u){}if(!(STATE.persistentParameters.page_referrer||STATE.persistentParameters.page_loc||STATE.persistentParameters.page_tit||i.page_referrer||i.page_loc||i.page_tit)){const e={page_loc:document.location.href,page_tit:document.title,lang:(navigator&&(navigator.language||navigator.browserLanguage)||'').toLowerCase(),screen_res:(window.screen?window.screen.width:0)+'x'+(window.screen?window.screen.height:0)};Object.entries(e).forEach((([e,t])=>{i[e]||(n[e]=t)}))}Object.entries(STATE.persistentParameters).forEach((([e,t])=>{i[e]||void 0!==n[e]||(n[e]=t)})),i.consent_analytics||(n.consent_analytics=STATE.consentStatus.analytics),i.consent_advertising||(n.consent_advertising=STATE.consentStatus.advertising),i.consent_personalization||(n.consent_personalization=STATE.consentStatus.personalization);try{const e=await(void 0!==window&&'navigator'in window&&navigator?.userAgentData?.getHighEntropyValues?navigator.userAgentData.getHighEntropyValues(['platform','platformVersion','architecture','model','uaFullVersion','bitness','fullVersionList','wow64']).then((e=>({ua_arch:e.architecture,ua_bits:e.bitness,ua_fvl:encodeURIComponent((Object.values(e.fullVersionList)||navigator?.userAgentData?.brands).map((e=>[e.brand,e.version].join(';'))).join('|')),ua_mob:e.mobile?1:0,ua_mod:e.model||navigator?.userAgentData?.mobile,ua_plat:e.platform||navigator?.userAgentData?.platform,ua_pv:e.platformVersion,ua_w64:e.wow64?1:0}))).catch((()=>null)):Promise.resolve(null));e&&Object.entries(e).forEach((([e,t])=>{i[e]||void 0!==n[e]||(n[e]=t)}))}catch(u){}return Object.entries(i).forEach((([e,t])=>n[e]=t)),s&&(n.event_name=s),n}function a(e,t){if('function'!=typeof navigator.sendBeacon){return!1}try{return navigator.sendBeacon(e,new Blob([JSON.stringify(t)],{type:'text/plain'}))}catch(r){return!1}}const API={config(e,r={}){return e&&!CONFIG.attributionIds.includes(e)&&CONFIG.attributionIds.push(e),r.ignoreReferrerDomains&&(CONFIG.ignoreReferrerDomains=Array.isArray(r.ignoreReferrerDomains)?r.ignoreReferrerDomains:[r.ignoreReferrerDomains]),Object.keys(r).forEach((e=>{e in CONFIG&&(CONFIG[e]=r[e])})),r.consent&&this.consent('update',{consent:r.consent}),((e={})=>{const r=n.canUse(STATE.consentStatus),i=e.client_id||n.getCookie('_t_cid',r)||n.getLocalStorage('_t_cid',r),s=n.getCookie('_t_fv',r)||n.getLocalStorage('_t_fv',r);if(i?(STATE.clientId=i,STATE.isFirstVisit=!s):(STATE.clientId=Math.floor(2147483647*Math.random())+'.'+t(),STATE.isFirstVisit=!0,r&&(n.setCookie('_t_cid',STATE.clientId,365,r,CONFIG.cookieDomain,CONFIG.cookieSecure),n.setLocalStorage('_t_cid',STATE.clientId,r))),STATE.isFirstVisit&&r){const e=""+t();n.setCookie('_t_fv',e,365,r,CONFIG.cookieDomain,CONFIG.cookieSecure),n.setLocalStorage('_t_fv',e,r)}})(r),(()=>{const e=t(),r=n.canUse(STATE.consentStatus);if(r){const t=n.getCookie('_t_sid',r),s=n.getLocalStorage('_t_sn',r),a=n.getCookie('_t_last',r);if(STATE.sessionNumber=STATE.isFirstVisit?1:parseInt(s||'1'),!t||e-parseInt(a||'0')>60*CONFIG.sessionTimeout){STATE.sessionId=e,STATE.isFirstVisit||STATE.sessionNumber++,STATE.sessionEngaged=!1,STATE.isNewVisit=!0;try{n.setLocalStorage('_t_sn',""+STATE.sessionNumber,r),n.setCookie('_t_sid',""+STATE.sessionId,0,r,CONFIG.cookieDomain,CONFIG.cookieSecure),n.setCookie('_t_last',""+e,0,r,CONFIG.cookieDomain,CONFIG.cookieSecure)}catch(i){}}else{STATE.sessionId=parseInt(t),STATE.sessionEngaged=!0,STATE.isNewVisit=!1;try{n.setCookie('_t_last',""+e,0,r,CONFIG.cookieDomain,CONFIG.cookieSecure)}catch(i){}}}else{STATE.sessionId=e,STATE.sessionNumber=1,STATE.sessionEngaged=!1,STATE.isNewVisit=!0}})(),e&&STATE.initializedTargets.add(e),CONFIG.initialized||(CONFIG.initialized=!0,window._trdt_uat_ready=!0,setTimeout(i.process,0)),!1!==r.send_page_view&&setTimeout((()=>this.event('page_view',{send_to:e})),0),!0},set(e,t){if('object'==typeof e){return Object.entries(e).forEach((([e,t])=>this.set(e,t))),!0}t=((e,t=100)=>{if(null==e){return e}if('function'==typeof e){try{e=e()}catch(r){return null}}return'string'==typeof e?e.substring(0,t):e})(t,100);const r=n.canUse(STATE.consentStatus);switch(e){case'user_id':STATE.userId=t,r&&(n.setCookie('_t_uid',t,365,r,CONFIG.cookieDomain,CONFIG.cookieSecure),n.setLocalStorage('_t_uid',t,r));break;case'client_id':STATE.clientId=t,r&&(n.setCookie('_t_cid',t,365,r,CONFIG.cookieDomain,CONFIG.cookieSecure),n.setLocalStorage('_t_cid',t,r));break;case'debug_mode':CONFIG.debug=!0===t||'true'===t;break;case'page_referrer':case'page_loc':case'page_tit':case'ignore_referrer':STATE.persistentParameters[e]=t,'ignore_referrer'===e&&(STATE.ignoreReferrer=!0===t||'true'===t);break;default:STATE.persistentParameters[e]=t}return!0},async event(e,r={}){if(!e){return!1}if(!CONFIG.initialized){return i.add(['event',e,r])}STATE.sessionEngaged=!0,r.hasOwnProperty('ignore_referrer')?(STATE.ignoreReferrer=!0===r.ignore_referrer,delete r.ignore_referrer):STATE.ignoreReferrer=!1,['page_referrer','page_loc','page_tit'].forEach((e=>{r.hasOwnProperty(e)&&(STATE.persistentParameters[e]=r[e],delete r[e])}));let o=CONFIG.attributionIds;r.send_to&&(o=Array.isArray(r.send_to)?r.send_to:[r.send_to],delete r.send_to);let c=o.filter((e=>STATE.initializedTargets.has(e)));0===c.length&&CONFIG.attributionIds.length>0&&(c=[CONFIG.attributionIds[0]]);const u=STATE.isFirstVisit,d=STATE.isNewVisit,_={...r,event_name:e},l=await s(_);c.forEach((e=>{const t={...l,attribution_id:e};((e,t,r)=>{try{if(window.fetch){fetch(e,{method:'POST',headers:{'Content-Type':'text/plain'},keepalive:!0,body:JSON.stringify(t)}).then((e=>{r&&r.callback&&r.callback({status:e.status})})).catch((r=>{'function'==typeof navigator.sendBeacon&&a(e,{...t,beacon_recovery:!0})}))}else{var n=new XMLHttpRequest;n.open('POST',e,!0),n.setRequestHeader('Content-Type','text/plain'),n.send(JSON.stringify(t)),n.onreadystatechange=()=>{4===n.readyState&&r&&r.callback&&r.callback({status:n.status})}}}catch(i){'function'==typeof navigator.sendBeacon&&a(e,{...t,beacon_recovery:!0})}})(CONFIG.endpoint,t,{callback(e){}})})),u&&(STATE.isFirstVisit=!1),d&&(STATE.isNewVisit=!1);const g=n.canUse(STATE.consentStatus);if(g){try{n.setCookie('_t_last',""+t(),0,g,CONFIG.cookieDomain,CONFIG.cookieSecure)}catch(f){}}return!0},consent(e,t){if(!t||!t.hasOwnProperty('consent')){return!1}const r=t.consent;return'analytics'in r&&(STATE.consentStatus.analytics=!0===r.analytics||'granted'===r.analytics),'advertising'in r&&(STATE.consentStatus.advertising=!0===r.advertising||'granted'===r.advertising),'personalization'in r&&(STATE.consentStatus.personalization=!0===r.personalization||'granted'===r.personalization),!0},get(e,t,r){let n;switch(t){case'client_id':n=STATE.clientId;break;case'user_id':n=STATE.userId;break;case'session_id':n=STATE.sessionId;break;case'consent_status':n={...STATE.consentStatus};break;case'debug_mode':n=CONFIG.debug;break;default:n=STATE.persistentParameters[t]}return'function'==typeof r&&r(n),n}},o=[].push;window._trdt_uat_queue.push=function(){const e=o.apply(this,arguments);return window._trdt_uat_ready&&setTimeout(i.process,0),e},window._trdt_uat=Object.assign((function(){const e=Array.from(arguments);if(0===e.length){return window._trdt_uat}if(CONFIG.initialized&&'string'==typeof e[0]&&API[e[0]]){const t=e.shift();return API[t].apply(API,e)}return i.add(e)}),API),window.attrib=window.attrib||function(){const e=Array.from(arguments);if(window._trdt_uat_ready&&'string'==typeof e[0]&&API[e[0]]){const t=e.shift();return API[t].apply(API,e)}return i.add(e)},setTimeout((()=>{window._trdt_uat_queue&&window._trdt_uat_queue.length>0&&i.process()}),0),'function'==typeof navigator.sendBeacon&&window.addEventListener('beforeunload',(()=>{CONFIG.initialized&&window._trdt_uat_queue&&window._trdt_uat_queue.length>0&&window._trdt_uat_queue.forEach((e=>{'event'===e[0]&&s({...e[2]||{},event_name:e[1]}).then((e=>{CONFIG.attributionIds.forEach((t=>{a(CONFIG.endpoint,{...e,attribution_id:t})}))}))}))})),e.exports&&(e.exports=window._trdt_uat)}(window,document)}},t={},function r(n){var i=t[n];if(void 0!==i){return i.exports}var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}(158).default;var e,t},'object'==typeof exports&&'object'==typeof module?module.exports=e():'function'==typeof define&&define.amd?define([],e):'object'==typeof exports?exports.AttributionCore=e():this.AttributionCore=e();