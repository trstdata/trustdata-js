!(function(){"use strict";function t(t,i,e){return(i=(function(t){var i=(function(t){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var e=i.call(t,"string");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return t+""})(t);return"symbol"==typeof i?i:i+""})(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function i(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,r)}return e}function e(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?i(Object(s),!0).forEach((function(i){t(e,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var r="undefined"!=typeof window?window:void 0,s="undefined"!=typeof globalThis?globalThis:r,n=Array.prototype.forEach,o=null==s?void 0:s.navigator,a=null==s?void 0:s.document,h=null==s?void 0:s.location,c=null==s?void 0:s.fetch,l=null!=s&&s.XMLHttpRequest&&"withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:void 0,u=null==s?void 0:s.AbortController,d=null==o?void 0:o.userAgent,f=null!=r?r:{},v="1.0.0",p=Object.prototype,g=p.hasOwnProperty,m=p.toString,_=Array.isArray||function(t){return"[object Array]"===m.call(t)},b=t=>"function"==typeof t,w=t=>void 0===t,y=t=>"[object String]"==m.call(t),k=t=>null===t,S=t=>"[object Number]"==m.call(t),O=t=>{var i={t:function(t){},info:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.t("log",...e)},warn:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.t("warn",...e)},error:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.t("error",...e)},critical:function(){for(var t=arguments.length,i=Array(t),e=0;e<t;e++)i[e]=arguments[e]},uninitializedWarning:t=>{i.error("You must initialize TrustData before calling ".concat(t))},createLogger:i=>O("".concat(t," ").concat(i))};return i},x=O("[TrustData.js]"),j=x.createLogger,E={};function I(t,i,e){if(_(t))if(n&&t.forEach===n)t.forEach(i,e);else if("length"in t&&t.length===+t.length)for(var r=0,s=t.length;r<s;r++)if(r in t&&i.call(e,t[r],r)===E)return}function T(t,i,e){if(!w(r=t)&&!k(r)){var r;if(_(t))return I(t,i,e);if((t=>t instanceof FormData)(t)){for(var s of t.entries())if(i.call(e,s[1],s[0])===E)return}else for(var n in t)if(g.call(t,n)&&i.call(e,t[n],n)===E)return}}var D=function(t){for(var i=arguments.length,e=Array(i>1?i-1:0),r=1;r<i;r++)e[r-1]=arguments[r];return I(e,(function(i){for(var e in i)void 0!==i[e]&&(t[e]=i[e])})),t},C=function(t){return function(){try{for(var i=arguments.length,e=Array(i),r=0;r<i;r++)e[r]=arguments[r];return t.apply(this,e)}catch(t){x.critical("Implementation error. Please turn on debug mode"),x.critical(t)}}};function R(t,i){for(var e=0;e<t.length;e++)if(i(t[e]))return t[e]}function P(t,i,e,r){var{capture:s=!1,passive:n=!0}={};null==t||t.addEventListener(i,e,{capture:s,passive:n})}var A=function(t,i,e){if(!t||!i||!i.length)return t;for(var r=t.split("#"),s=r[1],n=(r[0]||"").split("?"),o=n[1],a=n[0],h=(o||"").split("&"),c=[],l=0;l<h.length;l++){var u=h[l].split("=");_(u)&&(i.includes(u[0])?c.push(u[0]+"="+e):c.push(h[l]))}var d=a;return null!=o&&(d+="?"+c.join("&")),null!=s&&(d+="#"+s),d},B="cid",M="uid",U="udata",N="primary_window",z="fv",q=3e3,J="Mobile",F="Tablet",W="page_view",L="page_leave",G="event_name",K="first_visit",X="entrances",H="ignore_referrer",V=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","trdt_cpid","trdt_agid","trdt_kwid","trdt_ctid","mc_cid","gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],$={gclid:"google_ads",gclsrc:"google_ads",gbraid:"google_ads",wbraid:"google_ads",fbclid:"facebook",msclkid:"microsoft",twclid:"twitter",li_fat_id:"linkedin",ttclid:"tiktok",rdt_cid:"reddit",epik:"pinterest",qclid:"quora",sccid:"snapchat",irclid:"impact_radius",dclid:"doubleclick",igshid:"instagram"},Q=!!l||!!c,Y=(t,i)=>{var[r,s]=t.split("?"),n=e({},i);null==s||s.split("&").forEach((t=>{var[i]=t.split("=");delete n[i]}));var o=(function(t,i){var e;void 0===i&&(i="&");var r=[];return T(t,(function(t,i){w(t)||w(i)||"undefined"===i||(e=encodeURIComponent(t instanceof File?t.name:""+t),r[r.length]=encodeURIComponent(i)+"="+e)})),r.join(i)})(n);return o=o?(s?s+"&":"")+o:s,"".concat(r,"?").concat(o)},Z=(t,i)=>JSON.stringify(t,((t,i)=>"bigint"==typeof i?""+i:i),i),tt=t=>{var{data:i,compression:e}=t;if(i){if("base64"===e){var r=(function(t){var i,e,r,s,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=0,a=0,h="",c=[];if(!t)return t;t=(function(t){var i,e,r,s,n="";for(i=e=0,r=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,s=0;s<r;s++){var o=t.charCodeAt(s),a=null;o<128?e++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),k(a)||(e>i&&(n+=t.substring(i,e)),n+=a,i=e=s+1)}return e>i&&(n+=t.substring(i,t.length)),n})(t);do{i=(s=t.charCodeAt(o++)<<16|t.charCodeAt(o++)<<8|t.charCodeAt(o++))>>12&63,e=s>>6&63,r=63&s,c[a++]=n.charAt(s>>18&63)+n.charAt(i)+n.charAt(e)+n.charAt(r)}while(o<t.length);switch(h=c.join(""),t.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h})(Z(i)),s=(t=>"data="+encodeURIComponent("string"==typeof t?t:Z(t)))(r);return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var n=Z(i);return{contentType:"application/json",body:n,estimatedSize:new Blob([n]).size}}},it=[];function et(t,i,e,r,s){return S(t)?t>e?(x.warn(r+" cannot be greater than max: "+e+". Using max value instead."),e):t<i?(x.warn(r+" cannot be less than min: "+i+". Using min value instead."),i):t:(x.warn(r+" must be a number. using max or fallback. max: "+e+", fallback: "+s),et(s||e,i,e,r))}c&&it.push({transport:"fetch",method:t=>{var i,r,{contentType:s,body:n,estimatedSize:o}=null!==(i=tt(t))&&void 0!==i?i:{},a=new Headers;T(t.headers,(function(t,i){a.append(i,t)})),s&&a.append("Content-Type",s);var h=t.url,l=null;if(u){var d=new u;l={signal:d.signal,timeout:setTimeout((()=>d.abort()),t.timeout)}}c(h,e({method:(null==t?void 0:t.method)||"GET",headers:a,keepalive:"POST"===t.method&&(o||0)<52428.8,body:n,signal:null===(r=l)||void 0===r?void 0:r.signal},t.fetchOptions)).then((i=>i.text().then((e=>{var r,s={statusCode:i.status,text:e};if(200===i.status)try{s.json=JSON.parse(e)}catch(t){x.error(t)}null===(r=t.callback)||void 0===r||r.call(t,s)})))).catch((i=>{var e;x.error(i),null===(e=t.callback)||void 0===e||e.call(t,{statusCode:0,text:i})})).finally((()=>l?clearTimeout(l.timeout):null))}}),l&&it.push({transport:"XHR",method:t=>{var i,e=new l;e.open(t.method||"GET",t.url,!0);var{contentType:r,body:s}=null!==(i=tt(t))&&void 0!==i?i:{};T(t.headers,(function(t,i){e.setRequestHeader(i,t)})),r&&e.setRequestHeader("Content-Type",r),t.timeout&&(e.timeout=t.timeout),e.withCredentials=!0,e.onreadystatechange=()=>{if(4===e.readyState){var i,r={statusCode:e.status,text:e.responseText};if(200===e.status)try{r.json=JSON.parse(e.responseText)}catch{}null===(i=t.callback)||void 0===i||i.call(t,r)}},e.send(s)}}),null!=o&&o.sendBeacon&&it.push({transport:"sendBeacon",method:t=>{var i=Y(t.url,{beacon:"1"});try{var e,{contentType:r,body:s}=null!==(e=tt(t))&&void 0!==e?e:{},n="string"==typeof s?new Blob([s],{type:r}):s;o.sendBeacon(i,n)}catch{}}});class rt{constructor(t,i){this.i=!0,this.o=[],this.h=void 0,this.l=et((null==i?void 0:i.flush_interval_ms)||q,250,5e3,"flush interval",q),this.u=t}enqueue(t){this.o.push(t),this.h||this.v()}unload(){this.p();var t=this.o.length>0?this.m():{},i=Object.values(t);[...i.filter((t=>0===t.url.indexOf("/e"))),...i.filter((t=>0!==t.url.indexOf("/e")))].map((t=>{this.u(e(e({},t),{},{transport:"sendBeacon"}))}))}enable(){this.i=!1,this.v()}v(){var t=this;this.i||(this.h=setTimeout((()=>{if(this.p(),this.o.length>0){var i=this.m(),e=function(){var e=i[r],s=(new Date).getTime();e.data&&_(e.data)&&T(e.data,(t=>{t.offset=Math.abs(t.timestamp-s),delete t.timestamp})),t.u(e)};for(var r in i)e()}}),this.l))}p(){clearTimeout(this.h),this.h=void 0}m(){var t={};return T(this.o,(i=>{var r,s=i,n=(s?s.batchKey:null)||s.url;w(t[n])&&(t[n]=e(e({},s),{},{data:[]})),null===(r=t[n].data)||void 0===r||r.push(s.data)})),this.o=[],t}}var st=["retriesPerformedSoFar"];class nt{constructor(t){this.k=t,this.S=!1,this.O=void 0,this.j=3e3,this.o=[],this.I=!0,!w(r)&&"onLine"in r.navigator&&(this.I=r.navigator.onLine,P(r,"online",(()=>{this.I=!0,this.T()})),P(r,"offline",(()=>{this.I=!1})))}get length(){return this.o.length}retriableRequest(t){var{retriesPerformedSoFar:i}=t,r=(function(t,i){if(null==t)return{};var e,r,s=(function(t,i){if(null==t)return{};var e={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==i.indexOf(r))continue;e[r]=t[r]}return e})(t,i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)-1===i.indexOf(e=n[r])&&{}.propertyIsEnumerable.call(t,e)&&(s[e]=t[e])}return s})(t,st);S(i)&&i>0&&(r.url=Y(r.url,{retry_count:i})),this.k.D(e(e({},r),{},{callback:t=>{var s;200!==t.statusCode&&(t.statusCode<400||t.statusCode>=500)&&(null!=i?i:0)<10?this.C(e({retriesPerformedSoFar:i},r)):null===(s=r.callback)||void 0===s||s.call(r,t)}}))}C(t){var i=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=i+1;var e=(function(t){var i=3e3*2**t,e=i/2,r=Math.min(18e5,i),s=Math.random()-.5;return Math.ceil(r+s*(r-e))})(i),r=Date.now()+e;this.o.push({retryAt:r,requestOptions:t});var s="Enqueued failed request for retry in ".concat(e);navigator.onLine||(s+=" (Browser is offline)"),x.warn(s),this.S||(this.S=!0,this.R())}R(){this.O&&clearTimeout(this.O),this.O=setTimeout((()=>{this.I&&this.o.length>0&&this.T(),this.R()}),this.j)}T(){var t=Date.now(),i=[],e=this.o.filter((e=>e.retryAt<t||(i.push(e),!1)));if(this.o=i,e.length>0)for(var{requestOptions:r}of e)this.retriableRequest(r)}unload(){for(var{requestOptions:t}of(this.O&&(clearTimeout(this.O),this.O=void 0),this.o))try{this.k.D(e(e({},t),{},{transport:"sendBeacon"}))}catch(t){x.error(t)}this.o=[]}}function ot(){return Date.now().toString(36)+Math.random().toString(36).substring(2,9)}function at(){return Math.floor(Date.now()/1e3)}var ht="",ct=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,lt={is_supported:()=>!!a,error:function(t){x.error("cookieStore error: "+t)},get:function(t){if(a){try{for(var i=t+"=",e=a.cookie.split(";").filter((t=>t.length)),r=0;r<e.length;r++){for(var s=e[r];" "==s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(i))return decodeURIComponent(s.substring(i.length,s.length))}}catch{}return null}},parse:function(t){var i;try{i=JSON.parse(lt.get(t))||{}}catch{}return i},set:function(t,i,e,r,s){if(a)try{var n="",o="",h=(function(t,i){if(i){var e=(function(t,i){if(void 0===i&&(i=a),ht)return ht;if(!i)return"";if(["localhost","127.0.0.1"].includes(t))return"";for(var e=t.split("."),r=Math.min(e.length,8),s="dmn_chk_"+ot(),n=RegExp("(^|;)\\s*"+s+"=1");!ht&&r--;){var o=e.slice(r).join("."),h=s+"=1;domain=."+o;i.cookie=h,n.test(i.cookie)&&(i.cookie=h+";expires=Thu, 01 Jan 1970 00:00:00 GMT",ht=o)}return ht})(t);if(!e){var r=(t=>{var i=t.match(ct);return i?i[0]:""})(t);e=r}return e?"; domain=."+e:""}return""})(a.location.hostname,r);if(e){var c=new Date;c.setTime(c.getTime()+24*e*60*60*1e3),n="; expires="+c.toUTCString()}s&&(o="; secure");var l=t+"="+encodeURIComponent(JSON.stringify(i))+n+"; SameSite=Lax; path=/"+h+o;return l.length>3686.4&&x.warn("cookieStore warning: large cookie, len="+l.length),a.cookie=l,l}catch{return}},remove:function(t,i){try{lt.set(t,"",-1,i)}catch{return}}},ut=null,dt={is_supported:function(){if(!k(ut))return ut;var t=!0;if(w(r))t=!1;else try{var i="__mplssupport__";dt.set(i,"xyz"),'"xyz"'!==dt.get(i)&&(t=!1),dt.remove(i)}catch{t=!1}return t||x.error("localStorage unsupported; falling back to cookie store"),ut=t,t},error:function(t){x.error("localStorage error: "+t)},get:function(t){try{return r&&r.localStorage.getItem(t)}catch(t){dt.error(t)}return null},parse:function(t){try{return JSON.parse(dt.get(t))||{}}catch{}return null},set:function(t,i){try{r&&r.localStorage.setItem(t,JSON.stringify(i))}catch(t){dt.error(t)}},remove:function(t){try{r&&r.localStorage.removeItem(t)}catch(t){dt.error(t)}}},ft=[B,M,U,"sid","sn","last","start","wid",N,z],vt=e(e({},dt),{},{parse:function(t){try{var i={};try{i=lt.parse(t)||{}}catch{}var e=D(i,JSON.parse(dt.get(t)||"{}"));return dt.set(t,e),e}catch{}return null},set:function(t,i,e,r,s,n){try{dt.set(t,i,void 0,void 0,n);var o={};ft.forEach((t=>{i[t]&&(o[t]=i[t])})),Object.keys(o).length&&lt.set(t,o,e,r,s,n)}catch(t){dt.error(t)}},remove:function(t,i){try{r&&r.localStorage.removeItem(t),lt.remove(t,i)}catch(t){dt.error(t)}}}),pt={},gt={is_supported:function(){return!0},error:function(t){x.error("memoryStorage error: "+t)},get:function(t){return pt[t]||null},parse:function(t){return pt[t]||null},set:function(t,i){pt[t]=i},remove:function(t){delete pt[t]}};function mt(t,i){return-1!==t.indexOf(i)}var _t=J,bt="iOS",wt="Android",yt=F,kt=wt,St="iPad",Ot="Apple",xt=Ot+" Watch",jt="Safari",Et="BlackBerry",It="Samsung",Tt=It+"Browser",Dt=It+" Internet",Ct="Chrome",Rt=Ct+" OS",Pt=Ct+" "+bt,At="Internet Explorer",Bt=At,Mt="Opera",Ut=Mt+" Mini",Nt="Edge",zt="Edge",qt="Firefox",Jt=qt+" "+bt,Ft="Nintendo",Wt="PlayStation",Lt="Xbox",Gt=wt,Kt=jt,Xt="Windows",Ht=Xt+" Phone",Vt="Nokia",$t="Ouya",Qt="Generic",Yt=Qt+" "+_t.toLowerCase(),Zt=Qt+" "+yt.toLowerCase(),ti="Konqueror",ii="(\\d+(\\.\\d+)?)",ei=RegExp("Version/"+ii),ri=RegExp(Lt,"i"),si=RegExp(Wt+" \\w+","i"),ni=RegExp(Ft+" \\w+","i"),oi=RegExp(Et+"|PlayBook|BB10","i"),ai={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},hi=function(t,i){return i=i||"",mt(t," OPR/")&&mt(t,"Mini")?Ut:mt(t," OPR/")?Mt:oi.test(t)?Et:mt(t,"IE"+_t)||mt(t,"WPDesktop")?Bt:mt(t,Tt)?Dt:mt(t,Nt)||mt(t,"Edg/")?zt:mt(t,"FBIOS")?"Facebook "+_t:mt(t,"UCWEB")||mt(t,"UCBrowser")?"UC Browser":mt(t,"CriOS")?Pt:mt(t,"CrMo")||mt(t,Ct)?Ct:mt(t,wt)&&mt(t,jt)?Gt:mt(t,"FxiOS")?Jt:mt(t.toLowerCase(),"konqueror")?ti:((t,i)=>i&&mt(i,Ot)||(function(t){return mt(t,jt)&&!mt(t,Ct)&&!mt(t,wt)})(t))(t,i)?mt(t,_t)?Kt:jt:mt(t,qt)?qt:mt(t,"MSIE")||mt(t,"Trident/")?At:mt(t,"Gecko")?qt:""},ci={[Bt]:[RegExp("rv:"+ii)],[zt]:[RegExp(Nt+"?\\/"+ii)],[Ct]:[RegExp("("+Ct+"|CrMo)\\/"+ii)],[Pt]:[RegExp("CriOS\\/"+ii)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+ii)],[jt]:[ei],[Kt]:[ei],[Mt]:[RegExp("(Opera|OPR)\\/"+ii)],[qt]:[RegExp(qt+"\\/"+ii)],[Jt]:[RegExp("FxiOS\\/"+ii)],[ti]:[RegExp("Konqueror[:/]?"+ii,"i")],[Et]:[RegExp(Et+" "+ii),ei],[Gt]:[RegExp("android\\s"+ii,"i")],[Dt]:[RegExp(Tt+"\\/"+ii)],[At]:[RegExp("(rv:|MSIE )"+ii)],Mozilla:[RegExp("rv:"+ii)]},li=function(t,i){var e=hi(t,i),r=ci[e];if(w(r))return null;for(var s=0;s<r.length;s++){var n=t.match(r[s]);if(n)return parseFloat(n[n.length-2])}return null},ui=[[RegExp(Lt+"; "+Lt+" (.*?)[);]","i"),t=>[Lt,t&&t[1]||""]],[RegExp(Ft,"i"),[Ft,""]],[RegExp(Wt,"i"),[Wt,""]],[oi,[Et,""]],[RegExp(Xt,"i"),(t,i)=>{if(/Phone/.test(i)||/WPDesktop/.test(i))return[Ht,""];if(RegExp(_t).test(i)&&!/IEMobile\b/.test(i))return[Xt+" "+_t,""];var e=/Windows NT ([0-9.]+)/i.exec(i);if(e&&e[1]){var r=ai[e[1]]||"";return/arm/i.test(i)&&(r="RT"),[Xt,r]}return[Xt,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>t&&t[3]?[bt,[t[3],t[4],t[5]||"0"].join(".")]:[bt,""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var i="";return t&&t.length>=3&&(i=w(t[2])?t[3]:t[2]),["watchOS",i]}],[RegExp("("+wt+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+wt+")","i"),t=>t&&t[2]?[wt,[t[2],t[3],t[4]||"0"].join(".")]:[wt,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var i=["Mac OS X",""];return t&&t[1]&&(i[1]=[t[1],t[2],t[3]||"0"].join(".")),i}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Rt,""]],[/Linux|debian/i,["Linux",""]]],di=function(t){return ni.test(t)?Ft:si.test(t)?Wt:ri.test(t)?Lt:RegExp($t,"i").test(t)?$t:RegExp("("+Ht+"|WPDesktop)","i").test(t)?Ht:/iPad/.test(t)?St:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?xt:oi.test(t)?Et:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":RegExp(Vt,"i").test(t)?Vt:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!RegExp(_t).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?wt:kt:wt:RegExp("(pda|"+_t+")","i").test(t)?Yt:RegExp(yt,"i").test(t)&&!RegExp(yt+" pc","i").test(t)?Zt:""},fi="<masked>";function vi(){return navigator.language||navigator.userLanguage}function pi(){var t;return!a&&a.referrer?"$direct":(null===(t=(t=>{var i=a&&a.createElement("a");return w(i)?null:(i.href=t,i)})(a.referrer))||void 0===t?void 0:t.host)||"$direct"}function gi(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function mi(){try{return(new Date).getTimezoneOffset()}catch{return}}class _i{constructor(t){this._config=t.CONFIG,this.P=void 0,this.A=t.STATE}get consent(){return this.B()?0:this.M}isOptedOut(){return 0===this.consent||-1===this.consent&&this._config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(t){this.U.set(this.N,t?1:0,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),this.A&&(this.A.consentStatus=e(e({},this.A.consentStatus),{},{analytics:t}))}reset(){this.U.remove(this.N,this._config.cross_subdomain_cookie)}get N(){var{attribution_ids:t,opt_out_capturing_cookie_prefix:i}=this._config;return(i||"__tr_opt_in_out_")+t[0]}get M(){var t=this.U.get(this.N);return"1"===t?1:"0"===t?0:-1}get U(){if(!this.P){var t=this._config.opt_out_capturing_persistence_type;this.P="localStorage"===t?dt:lt;var i="localStorage"===t?lt:dt;i.get(this.N)&&(this.P.get(this.N)||this.optInOut("1"===i.get(this.N)),i.remove(this.N,this._config.cross_subdomain_cookie))}return this.P}B(){return!!this._config.respect_dnt&&!!R([null==o?void 0:o.doNotTrack,null==o?void 0:o.msDoNotTrack,f.doNotTrack],(t=>mt([!0,1,"1","yes"],t)))}}class bi{constructor(t){this.logger=j("[SessionManager]"),this._config=t.CONFIG,this.A=t.STATE,this.q=t.consentManager,this.J=t.persistence;var i=this._config.persistence_name||"_trdt";this.SESSION_DATA_KEY=i+"_sdata",this.SESSION_NUMBER_KEY=i+"_sn",this.WINDOW_ID_KEY=i+"_wid",this.PRIMARY_WINDOW_KEY=i+"_"+N,this._sessionId=null,this._sessionActivityTimestamp=null,this._sessionStartTimestamp=null,this.F=null,this.windowId=null,this.sessionChangeHandlers=[],this.sessionTimer=null,this.W(),this.initSession(!0)}L(){return 60*Math.min(Math.max(this._config.sessionTimeout||30,1),600)*1e3}G(){var t=this.q.isOptedIn()&&!this._config.disable_persistence&&this.J;return this.q.isOptedIn(),t}K(){try{return"undefined"!=typeof sessionStorage&&null!==sessionStorage}catch(t){return x.error("Error accessing sessionStorage:",t),!1}}X(){if(this.windowId)return this.windowId;if(this.K())try{var t=sessionStorage.getItem(this.WINDOW_ID_KEY);if(t)return t}catch(t){x.error("Error reading window ID from sessionStorage:",t)}return null}H(t){if(t!==this.windowId&&(this.windowId=t,this.K()))try{sessionStorage.setItem(this.WINDOW_ID_KEY,t)}catch(t){x.error("Error storing window ID in sessionStorage:",t)}}W(){if(this.K())try{var t=sessionStorage.getItem(this.WINDOW_ID_KEY),i=sessionStorage.getItem(this.PRIMARY_WINDOW_KEY);t&&!i?this.windowId=t:sessionStorage.removeItem(this.WINDOW_ID_KEY),sessionStorage.setItem(this.PRIMARY_WINDOW_KEY,"true"),window.addEventListener("beforeunload",(()=>{sessionStorage.removeItem(this.PRIMARY_WINDOW_KEY)}))}catch(t){x.error("Error initializing window tracking:",t)}}V(t,i,e){if((t!==this._sessionId||i!==this._sessionActivityTimestamp||e!==this._sessionStartTimestamp)&&(this._sessionId=t,this._sessionActivityTimestamp=i,this._sessionStartTimestamp=e,this.G()))try{var r=[i,t,e];if(!this.J||"function"!=typeof this.J.set)return void x.error("Persistence layer is not properly initialized");this.J.set(this.SESSION_DATA_KEY,JSON.stringify(r),this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),this.J.get(this.SESSION_DATA_KEY)}catch(t){x.error("Error storing session data:",t)}}$(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];if(this.G())try{var t=this.J.get(this.SESSION_DATA_KEY);if(t){var i;try{i=JSON.parse(JSON.parse(t))}catch(e){try{i=JSON.parse(t)}catch(i){return x.error("Unable to parse session data:",t,i),[0,null,0]}}if(Array.isArray(i))return 2===i.length&&i.push(i[0]),this._sessionActivityTimestamp=i[0],this._sessionId=i[1],this._sessionStartTimestamp=i[2],i;x.error("Stored session data is not an array:",i)}}catch(t){x.error("Error reading session data:",t)}return[0,null,0]}Y(){if(this.F)return this.F;if(this.G())try{var t=this.J.get(this.SESSION_NUMBER_KEY);if(t){var i=parseInt(t)||1;return this.F=i,i}}catch(t){x.error("Error reading session number:",t)}return 1}Z(t){if(this.F=t,this.G())try{this.J.set(this.SESSION_NUMBER_KEY,""+t,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),this.J.get(this.SESSION_NUMBER_KEY)}catch(t){x.error("Error storing session number:",t)}}tt(t,i){return t>0&&i-t>864e5}checkAndGetSessionAndWindowId(t,i){void 0===t&&(t=!1),void 0===i&&(i=null);var e=i||(new Date).getTime();if(this.G()){var r=this.J.get(this.SESSION_DATA_KEY);try{r&&JSON.parse(r)}catch(t){x.error("Error parsing raw session data:",t)}}var s,[n,o,a]=this.$(),h=this.X(),c=this.Y(),l=a>0&&e-a>864e5,u=!1,d=!o,f=!t&&n>0&&e-n>this.L();this.L(),d||f||l?(o=at(),h=ot(),a=e,c++,this.Z(c),u=!0):h||(h=ot(),u=!0),s=!t||u||0===n?e:n;var v=0===a?e:a;return this.H(h),this.V(o,s,v),this.A?(this.A.sessionId=o,this.A.sessionNumber=c,this.A.sessionEngaged=!u,this.A.isNewVisit=u):x.error("State object is not available"),t||this.refreshSessionTimer(),u&&this.it(o,h,u?{noSessionId:d,activityTimeout:f,sessionPastMaximumLength:l}:void 0),{sessionId:o,windowId:h,sessionStartTimestamp:v,sessionNumber:c,changeReason:u?{noSessionId:d,activityTimeout:f,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:s}}initSession(t){return void 0===t&&(t=!1),this.checkAndGetSessionAndWindowId(t)}refreshSessionTimer(){clearTimeout(this.sessionTimer);var t=1.1*this.L();this.sessionTimer=setTimeout((()=>{this.resetSession()}),t)}resetSession(){this.V(null,0,0),this.initSession()}onSessionChange(t){return this.sessionChangeHandlers.push(t),this._sessionId&&t(this._sessionId,this.windowId),()=>{this.sessionChangeHandlers=this.sessionChangeHandlers.filter((i=>i!==t))}}it(t,i,e){this.sessionChangeHandlers.forEach((r=>{try{r(t,i,e)}catch(t){x.error("Error in session change handler:",t)}}))}getSessionId(){return this._sessionId||this.A&&this.A.sessionId||null}getWindowId(){return this.X()}}class wi{constructor(t){this._config=t.CONFIG,this.A=t.STATE,this.J=t.persistence,this.q=t.consentManager,this.clientId=null,this.isFirstVisit=!1}initClientId(t){void 0===t&&(t={});var i=this.G(),e=this._config.persistence_name||"_trdt",r=t.client_id;if(!r&&i&&(r=this.J.get(e+"_"+B))&&r.startsWith('"')&&r.endsWith('"'))try{r=JSON.parse(r)}catch(t){x.error("Error parsing stored client ID",t)}var s=i&&this.J.get(e+"_"+z);return r?(this.clientId=r,this.isFirstVisit=!s):(this.clientId=!0!==this._config.cookieless||this.q.isOptedIn()?Math.floor(2147483647*Math.random())+"."+at():null,this.isFirstVisit=!0,i&&this.clientId&&(this.et(this.clientId),this.rt())),this.A.clientId=this.clientId,this.A.isFirstVisit=this.isFirstVisit,this.clientId}et(t){if(this.G()&&t){var i=this._config.persistence_name||"_trdt",e=this._config.cookie_expiration,r=this._config.cross_subdomain_cookie,s=this._config.secure_cookie,n=t&&"string"==typeof t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t;this.J.set(i+"_"+B,n,e,r,s)}}rt(){if(this.G()&&this.isFirstVisit){var t=this._config.persistence_name||"_trdt",i=this._config.cookie_expiration,e=this._config.cross_subdomain_cookie,r=this._config.secure_cookie,s=""+Date.now();this.J.set(t+"_"+z,s,i,e,r)}}setClientId(t){if(!t)return!1;var i=t&&"string"==typeof t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t;return this.clientId=i,this.A.clientId=i,this.G()&&this.et(i),!0}getClientId(){return this.clientId}setServerGeneratedClientId(t){if(!t)return!1;if((!0===this._config.cookieless||!this.clientId)&&t!==this.clientId){if(this.clientId=t,this.A.clientId=t,this.J)try{var i=this.J.parse(this._config.persistence_name)||{};i.client_id=t,this.J.set(this._config.persistence_name,i)}catch(t){x.error("Error storing server-generated client ID:",t)}return this.G()&&this.et(t),!0}return!1}G(){return this.q.isOptedIn()&&!this._config.disable_persistence}}class yi{constructor(t){this._config=t.CONFIG,this.J=t.persistence,this.persistence_name=this._config.persistence_name||"_trdt",this.storageKey=this.persistence_name+"_click_ids",this.st()}st(){this.nt(),this.ot()}nt(){if("undefined"!=typeof window&&window.location){var t=new URLSearchParams(window.location.search),i={},e=!1;V.forEach((r=>{var s=t.get(r);s&&(i[r]=s,e=!0)})),e&&this.ht(i)}}ht(t){var i=Date.now(),e={clickIds:t,timestamp:i,referrer:document.referrer||null},r=this.ct();r.entries.push(e),r.entries.length>50&&(r.entries=r.entries.slice(-50)),r.lastUpdated=i,this.lt(r)}ct(){try{if(this.J&&"function"==typeof this.J.get){var t=this.J.get(this.storageKey);if(t){var i="string"==typeof t?JSON.parse(t):t;if(i&&i.entries&&Array.isArray(i.entries))return i}}}catch(t){x.error("Error reading stored click IDs:",t)}return{entries:[],lastUpdated:null,version:"1.0"}}lt(t){try{this.J&&"function"==typeof this.J.set&&this.J.set(this.storageKey,t,90,this._config.cross_subdomain_cookie,this._config.secure_cookie)}catch(t){x.error("Error saving click ID data:",t)}}ot(){var t=this.ct(),i=Date.now()-7776e6,e=t.entries.length;t.entries=t.entries.filter((t=>t.timestamp>i)),t.entries.length!==e&&this.lt(t)}getLatestClickIds(){var t=this.ct();return t.entries.length>0?t.entries[t.entries.length-1]:null}getClickIdsInWindow(t){void 0===t&&(t=30);var i=this.ct(),e=Date.now()-24*t*60*60*1e3;return i.entries.filter((t=>t.timestamp>e))}getClickIdsByParam(t,i){return void 0===i&&(i=30),this.getClickIdsInWindow(i).filter((i=>i.clickIds[t])).map((i=>({value:i.clickIds[t],timestamp:i.timestamp})))}getLatestClickIdsByPlatform(t){void 0===t&&(t=30);for(var i=this.getClickIdsInWindow(t),e={},r=function(){var t=i[s];Object.entries(t.clickIds).forEach((i=>{var[r,s]=i,n=$[r];n&&!e[n]&&(e[n]={platform:n,clickIdParam:r,value:s,timestamp:t.timestamp,referrer:t.referrer})}))},s=i.length-1;s>=0;s--)r();return e}getAttributionData(t){void 0===t&&(t=30);var i=this.getLatestClickIdsByPlatform(t),e={};Object.values(i).forEach((t=>{var{clickIdParam:i,value:r,timestamp:s}=t;e[i]=r,e["_".concat(i,"_timestamp")]=s}));var r=Object.keys(i);return r.length>0&&(e._attribution_platforms=r.join(","),e._attribution_count=r.length),e}getConversionTrackingRequirements(t){void 0===t&&(t=30);var i=this.getLatestClickIdsByPlatform(t),e={platforms:[],clickIds:{},shouldTrackConversions:Object.keys(i).length>0};return Object.entries(i).forEach((t=>{var[i,r]=t;e.platforms.push(i),e.clickIds[i]={param:r.clickIdParam,value:r.value,timestamp:r.timestamp}})),e}getConversionData(t){void 0===t&&(t=30);var i=this.getLatestClickIdsByPlatform(t),e={};return Object.entries(i).forEach((t=>{var[i,r]=t;switch(i){case"google_ads":e.google_ads={gclid:"gclid"===r.clickIdParam?r.value:null,gbraid:"gbraid"===r.clickIdParam?r.value:null,wbraid:"wbraid"===r.clickIdParam?r.value:null,timestamp:r.timestamp,shouldSendConversion:!0};break;case"facebook":e.facebook={fbclid:r.value,timestamp:r.timestamp,shouldSendConversion:!0};break;case"microsoft":e.microsoft={msclkid:r.value,timestamp:r.timestamp,shouldSendConversion:!0};break;default:e[i]={clickId:r.value,param:r.clickIdParam,timestamp:r.timestamp,shouldSendConversion:!0}}})),e}clearClickIds(){try{this.J&&"function"==typeof this.J.remove&&this.J.remove(this.storageKey,this._config.cross_subdomain_cookie)}catch(t){x.error("Error clearing click IDs:",t)}}}class ki{constructor(t){this._config=t.CONFIG,this.J=t.persistence,this.persistence_name=this._config.persistence_name||"_trdt",this.storageKey=this.persistence_name+"_adblock_status",this.testUrls={google_ads:["https://www.google-analytics.com/collect","https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"],google_analytics:["https://www.google-analytics.com/collect","https://www.google-analytics.com/analytics.js"],google_tag_manager:["https://www.googletagmanager.com/gtm.js"],facebook_ads:["https://www.facebook.com/tr","https://connect.facebook.net/en_US/fbevents.js"],microsoft_ads:["https://bat.bing.com/action/0","https://bat.bing.com/bat.js"],snapchat_ads:["https://tr.snapchat.com/cm/i","https://sc-static.net/scevent.min.js"],twitter_ads:["https://analytics.twitter.com/i/adsct","https://static.ads-twitter.com/uwt.js"],tiktok_ads:["https://analytics.tiktok.com/api/v2/pixel/track/","https://analytics.tiktok.com/i18n/pixel/events.js"],amazon_ads:["https://s.amazon-adsystem.com/iu3","https://c.amazon-adsystem.com/aax2/amzn_ads.js"],criteo_ads:["https://gum.criteo.com/sid/json","https://static.criteo.net/js/ld/ld.js"],outbrain_ads:["https://log.outbrain.com/amplog","https://widgets.outbrain.com/outbrain.js"],taboola_ads:["https://trc.taboola.com/sg/publisher/load","https://cdn.taboola.com/libtrc/publisher/loader.js"]},this.detectionResults={anyAdblocker:null,domAdblocker:null,braveShields:null,operaAdblocker:null,platformBlocking:{},detectedAt:null,lastChecked:null},this.ut()}ut(){this.dt(),(!this.detectionResults.lastChecked||Date.now()-this.detectionResults.lastChecked>864e5)&&this.ft()}dt(){try{if(this.J&&"function"==typeof this.J.get){var t=this.J.get(this.storageKey);if(t){var i="string"==typeof t?JSON.parse(t):t;i&&i.lastChecked&&(this.detectionResults=e(e({},this.detectionResults),i))}}}catch(t){x.error("Error loading cached ad block results:",t)}}vt(){try{this.J&&"function"==typeof this.J.set&&this.J.set(this.storageKey,this.detectionResults,30,this._config.cross_subdomain_cookie,this._config.secure_cookie)}catch(t){x.error("Error saving ad block detection results:",t)}}async ft(){try{this.detectionResults.lastChecked=Date.now();var t=await Promise.allSettled([this.gt(),this._t(),this.bt()]);this.detectionResults.domAdblocker="fulfilled"===t[0].status?t[0].value:null,this.detectionResults.braveShields="fulfilled"===t[1].status?t[1].value:null,this.detectionResults.operaAdblocker="fulfilled"===t[2].status?t[2].value:null,await this.wt(),this.detectionResults.anyAdblocker=this.yt(),this.detectionResults.anyAdblocker&&(this.detectionResults.detectedAt=Date.now()),this.vt()}catch(t){x.error("Error during ad block detection:",t)}}async wt(){var t=[];Object.entries(this.testUrls).forEach((i=>{var[e,r]=i;t.push(this.kt(e,r))})),(await Promise.allSettled(t)).forEach(((t,i)=>{var e;this.detectionResults.platformBlocking[Object.keys(this.testUrls)[i]]="fulfilled"===t.status?t.value:{blocked:!1,error:(null===(e=t.reason)||void 0===e?void 0:e.message)||"Unknown error"}}))}async kt(t,i){var e={platform:t,blocked:!1,blockedUrls:[],totalUrls:i.length,blockedCount:0},r=i.map((t=>this.St(t)));return(await Promise.allSettled(r)).forEach(((t,r)=>{"fulfilled"===t.status&&t.value.blocked&&(e.blockedUrls.push({url:i[r],reason:t.value.reason}),e.blockedCount++)})),e.blocked=e.blockedCount>0,e}async St(t){return new Promise((i=>{var e=t.toLowerCase().includes(".js"),r=Date.now();e?this.Ot(t,r,i):this.xt(t,r,i)}))}Ot(t,i,e){var r=document.createElement("script"),s=setTimeout((()=>{n(),e({blocked:!0,reason:"Script loading timeout"})}),3e3),n=()=>{clearTimeout(s),r.parentNode&&r.parentNode.removeChild(r)};r.onload=()=>{var s=Date.now()-i;n();var o=this.jt(t,r,s);e(o)},r.onerror=()=>{n(),e({blocked:!0,reason:"Script failed to load (blocked)"})};var o=t.includes("?")?"&":"?",a="".concat(t).concat(o,"_adblock_test=").concat(Date.now());r.src=a,r.type="text/javascript",r.async=!0,document.head.appendChild(r)}xt(t,i,e){var r=new Image,s=setTimeout((()=>{e({blocked:!0,reason:"Image pixel timeout"})}),3e3);r.onload=()=>{clearTimeout(s);var t=Date.now();e({blocked:!1,reason:"Analytics endpoint accessible",duration:t-i})},r.onerror=()=>{clearTimeout(s);var t=Date.now();e(t-i<10?{blocked:!0,reason:"Suspiciously fast image error (likely blocked)"}:{blocked:!0,reason:"Analytics endpoint blocked"})};var n=t.includes("?")?"&":"?",o="".concat(t).concat(n,"_adblock_test=").concat(Date.now());r.src=o}jt(t,i,e){t.toLowerCase();var r=this.Et(t);if(r){for(var s of r)if(s())return{blocked:!1,reason:"Script loaded successfully (globals detected)"};return{blocked:!0,reason:"Script loaded but expected functionality missing (likely replaced)"}}return{blocked:!1,reason:"Script loaded successfully"}}Et(t){var i=t.toLowerCase();return i.includes("googletagmanager.com/gtm.js")?[()=>window.google_tag_manager&&"object"==typeof window.google_tag_manager,()=>window.dataLayer&&Array.isArray(window.dataLayer),()=>window.gtag&&"function"==typeof window.gtag]:i.includes("google-analytics.com/analytics.js")?[()=>window.ga&&"function"==typeof window.ga,()=>window.GoogleAnalyticsObject,()=>window.gtag&&"function"==typeof window.gtag]:i.includes("googlesyndication.com")||i.includes("adsbygoogle.js")?[()=>window.adsbygoogle&&Array.isArray(window.adsbygoogle),()=>window.googletag&&"object"==typeof window.googletag]:i.includes("facebook.net")&&i.includes("fbevents.js")?[()=>window.fbq&&"function"==typeof window.fbq,()=>window._fbq&&"object"==typeof window._fbq]:i.includes("bing.com")&&i.includes("bat.js")?[()=>window.uetq&&Array.isArray(window.uetq),()=>window.UET&&"object"==typeof window.UET]:i.includes("sc-static.net")||i.includes("scevent")?[()=>window.snaptr&&"function"==typeof window.snaptr]:i.includes("ads-twitter.com")&&i.includes("uwt.js")?[()=>window.twq&&"function"==typeof window.twq]:i.includes("tiktok.com")&&i.includes(".js")?[()=>window.ttq&&"function"==typeof window.ttq]:i.includes("amazon-adsystem.com")&&i.includes(".js")?[()=>window.amzn_ads&&"object"==typeof window.amzn_ads]:i.includes("criteo.net")&&i.includes(".js")?[()=>window.Criteo&&"object"==typeof window.Criteo]:i.includes("outbrain.com")&&i.includes(".js")?[()=>window.OBR&&"object"==typeof window.OBR]:i.includes("taboola.com")&&i.includes(".js")?[()=>window._taboola&&Array.isArray(window._taboola)]:null}yt(){return!!(this.detectionResults.domAdblocker||this.detectionResults.braveShields||this.detectionResults.operaAdblocker)||Object.values(this.detectionResults.platformBlocking).some((t=>!0===t.blocked))}async It(){return!!this.Tt()||Object.values(this.detectionResults.platformBlocking).some((t=>!0===t.blocked))}Tt(){if("undefined"==typeof window||!window.document)return!1;if(window.document.body&&null!==window.document.body.getAttribute("abp"))return!0;var t=this.Dt();if(!t)return!1;window.document.body.appendChild(t);var i=this.Ct(t);return window.document.body.removeChild(t),i}async gt(){return this.Tt()}async _t(){return!!this.Rt()&&Object.values(this.detectionResults.platformBlocking).some((t=>!0===t.blocked))}async bt(){return!!this.Pt()&&Object.values(this.detectionResults.platformBlocking).some((t=>!0===t.blocked))}Rt(){return"undefined"!=typeof navigator&&void 0!==navigator.brave&&void 0!==navigator.brave.isBrave}Pt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.match(/Opera|OPR\//)}Dt(){if("undefined"==typeof document)return null;var t=document.createElement("div");return t.setAttribute("class","pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links ad-text adSense adBlock adContent adBanner"),t.setAttribute("style","width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;"),t}Ct(t){if(!t)return!1;if(null===t.offsetParent||0==t.offsetHeight||0==t.offsetLeft||0==t.offsetTop||0==t.offsetWidth||0==t.clientHeight||0==t.clientWidth)return!0;if("undefined"!=typeof window&&void 0!==window.getComputedStyle){var i=window.getComputedStyle(t,null);if(i&&("none"==i.getPropertyValue("display")||"hidden"==i.getPropertyValue("visibility")))return!0}return!1}}class Si{constructor(t){this._config=t.CONFIG,this.A=t.STATE,this.J=t.persistence,this.q=t.consentManager,this.userId=null,this.userData={},this.identifiers={}}initUser(t){void 0===t&&(t={});var i=this.G(),e=this._config.persistence_name||"_trdt";if(this.userId=t.user_id||i&&this.J.get(e+"_"+M),i)try{var r=this.J.get(e+"_"+U);r&&(this.userData=JSON.parse(r))}catch(t){x.error("Error parsing stored user data",t),this.userData={}}return this.A.userId=this.userId,this.userData}setUserId(t){return!!t&&(this.userId=t,this.A.userId=t,this.G()&&this.J.set((this._config.persistence_name||"_trdt")+"_"+M,t,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),!0)}setUserData(t){if((i=t)!==Object(i)||_(i))return!1;var i;if(this.userData=e(e({},this.userData),t),this.G()){var r=this._config.cookie_expiration,s=this._config.cross_subdomain_cookie,n=this._config.secure_cookie;this.J.set((this._config.persistence_name||"_trdt")+"_"+U,JSON.stringify(this.userData),r,s,n)}return!0}setIdentifier(t,i){return!(!y(t)||!y(i)||(this.identifiers[t]=i,0))}getUserData(){return e(e({},this.userData),this.identifiers)}getUserId(){return this.userId}G(){return this.q.isOptedIn()&&!this._config.disable_persistence}}var Oi=()=>{},xi="trustdata";!Q&&-1===(null==d?void 0:d.indexOf("MSIE"))&&(null==d||d.indexOf("Mozilla"));class ji{__loaded=!1;CONFIG=(()=>{var t;return{api_host:"https://t.trstdata.com",api_endpoint:"/api/events",attribution_ids:[],ignore_referrer_domains:[],cross_subdomain_cookie:!0,persistence:"localStorage+cookie",persistence_name:"_trdt",cookieless:!1,debug:!1,loaded:Oi,cookie_expiration:365,disable_persistence:!1,disable_compression:!0,secure_cookie:r&&"https:"===(null===(t=r.location)||void 0===t?void 0:t.protocol),request_batching:!0,properties_string_max_length:65535,session_timeout:30,on_request_error:t=>{x.error("Bad HTTP status: "+t.statusCode+" "+t.text)},send_page_view:!0,onCapture:Oi,flush_interval_ms:q}})();constructor(){this.STATE={clientId:null,userId:null,sessionId:null,sessionNumber:1,sessionEngaged:!1,isNewVisit:!1,isFirstVisit:!1,ignoreReferrer:!1,consentStatus:{analytics:!1,advertising:!1,personalization:!1},persistentParameters:{},initializedTargets:new Set},this.At=null,this.logger=j("[TrustData.js]"),this.consentManager=new _i(this)}config(t,i,e){var r;if(void 0===i&&(i={}),void 0===e&&(e=null),!e||e===xi)return this._config(t,i,e);var s=null!==(r=Ei[e])&&void 0!==r?r:new ji;return s._config(t,i,e),Ei[e]=s,Ei[xi][e]=s,s}Bt(t){if(_(t)){var i=[],e=[],r=[];T(t,(t=>{if(t){var s=t[0];_(s)?r.push(t):b(t)?t.call(this):_(t)&&"config"===s?i.push(t):_(t)&&-1!==s.indexOf("event")&&b(this[s])?r.push(t):e.push(t)}}));var s=t=>{T(t,(t=>{if(_(t[0])){var i=this;T(t,(t=>{i=i[t[0]].apply(i,t.slice(1))}))}else"function"==typeof this[t[0]]?this[t[0]].apply(this,t.slice(1)):x.warn("Unknown command:",t[0])}))};s(i),s(e),s(r)}}_config(t,i,e){return void 0===i&&(i={}),this.__loaded?(x.warn("You have already initialized TrustData! Re-initializing is a no-op"),this):(t&&!this.CONFIG.attribution_ids.includes(t)&&this.CONFIG.attribution_ids.push(t),t?(i.ignoreReferrerDomains&&(this.CONFIG.ignore_referrer_domains=Array.isArray(i.ignoreReferrerDomains)?i.ignoreReferrerDomains:[i.ignoreReferrerDomains]),Object.keys(i).forEach((t=>{t in this.CONFIG&&(this.CONFIG[t]=i[t])})),i.consent&&this.consent("update",{consent:i.consent}),this.Mt(),this._requestQueue=new rt((t=>this.Ut(t)),{flush_interval_ms:this.CONFIG.flush_interval_ms}),this._retryQueue=new nt(this),this.clientManager=new wi(this),this.userManager=new Si(this),this.clickIdManager=new yi(this),this.adBlockManager=new ki(this),this.clientManager.initClientId(i),this.userManager.initUser(i),this.sessionManager=new bi(this),this.__loaded=!0,this.consentManager.isOptedIn()&&this.CONFIG.request_batching&&this._requestQueue.enable(),this.Nt(),r.zt=!0,t&&this.STATE.initializedTargets.add(t),!1!==i.send_page_view&&setTimeout((()=>this.event(W,{send_to:t})),50),"function"==typeof this.CONFIG.loaded&&this.CONFIG.loaded(this),!0):(x.critical("TrustData was initialized without a target ID. This likely indicates a misconfiguration."),this))}Mt(){var t=this.CONFIG,i=t.persistence;!0!==t.cookieless||this.STATE.consentStatus.analytics||(i="memory"),this.persistence="localStorage"===i?dt:"cookie"===i?lt:"memory"===i?gt:vt,this.sessionPersistence="sessionStorage"===this.CONFIG.persistence?this.persistence:e(e({},this.persistence),{},{persistence:"sessionStorage"}),this.persistence_name=t.persistence_name||"_trdt"}Nt(){var t="onpagehide"in self?"pagehide":"unload";r.addEventListener(t,this.qt.bind(this),{passive:!1})}qt(){this.CONFIG.request_batching?(this.event(L),this._requestQueue.unload(),this._retryQueue.unload()):this.event(L,null,{transport:"sendBeacon"})}set(t,i){if(!this.__loaded)return this.push(["set",t,i]);if("object"==typeof t)return Object.entries(t).forEach((t=>{var[i,e]=t;return this.set(i,e)})),!0;if("function"==typeof i)try{i=i()}catch(t){return x.error("Error processing function value:",t),!1}switch("string"==typeof i&&(i=i.substring(0,100)),t){case"user_id":this.STATE.userId=i,this.userManager.setUserId(i);break;case"client_id":this.clientManager.setClientId(i);break;case"debug_mode":this.CONFIG.debug=!0===i||"true"===i;break;case"page_referrer":case"page_location":case"page_title":this.STATE.persistentParameters[t]=i,"ignore_referrer"===t&&(this.STATE.ignoreReferrer=!0===i||"true"===i);break;case"user_data":"object"==typeof i&&this.userManager.setUserData(i);break;case"email_hash":case"phone_hash":this.userManager.setIdentifier(t,i);break;default:this.STATE.persistentParameters[t]=i}return!0}event(t,i,r){if(void 0===i&&(i={}),void 0===r&&(r={}),!t)return x.error("Missing event name"),!1;if(!this.__loaded)return this.push(["event",t,i,r]);this.sessionManager&&this.sessionManager.checkAndGetSessionAndWindowId(!1),this.STATE.sessionEngaged=!0,i&&i.hasOwnProperty("ignore_referrer")&&(this.STATE.ignoreReferrer=!0===i.ignore_referrer,delete i.ignore_referrer),i&&["page_referrer","page_location","page_title"].forEach((t=>{i.hasOwnProperty(t)&&(this.STATE.persistentParameters[t]=i[t])}));var s=this.CONFIG.attribution_ids;i&&i.send_to&&(s=Array.isArray(i.send_to)?i.send_to:[i.send_to],delete i.send_to);var n=s.filter((t=>this.STATE.initializedTargets.has(t)));0===n.length&&this.CONFIG.attribution_ids.length>0&&(n=[this.CONFIG.attribution_ids[0]]);var o=this.STATE.isFirstVisit,a=this.STATE.isNewVisit,h=this.Jt(t,i);return n.forEach((t=>{var i=e(e({},h),{},{attribution_id:t}),s={method:"POST",url:this.CONFIG.api_host+this.CONFIG.api_endpoint,data:i,compression:this.CONFIG.disable_compression?void 0:"gzip-js",batchKey:t};r&&r.transport&&(s.transport=r.transport),this.CONFIG.request_batching&&!r.send_instantly?this._requestQueue.enqueue(s):this.Ut(s)})),o&&(this.STATE.isFirstVisit=!1),a&&(this.STATE.isNewVisit=!1),this.sessionManager&&this.sessionManager.refreshSessionTimer(),!0}Jt(t,i){var s,n,o,c;void 0===i&&(i={});var l=e(e({},i),{},{[G]:t}),u={};this.CONFIG.cookieless&&!this.STATE.consentStatus.analytics||(u.client_id=this.STATE.clientId),u.session_id=this.STATE.sessionId,u.session_number=this.STATE.sessionNumber||1,u.session_engaged=this.STATE.sessionEngaged?1:0,u.event_time=Math.floor(Date.now()/1e3),Object.entries(u).forEach((t=>{var[i,e]=t;l.hasOwnProperty(i)||(l[i]=e)}));var f=(function(){if(!d)return{};var t,i,e,[s,n]=(function(t){for(var i=0;i<ui.length;i++){var[e,r]=ui[i],s=e.exec(t),n=s&&(b(r)?r(s,t):r);if(n)return n}return["",""]})(d);return D({lib:"web",lib_version:v,event_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),event_time:Date.now()/1e3,page_location:A(null==h?void 0:h.href,[],fi),page_hostname:null==h?void 0:h.host,page_path:null==h?void 0:h.pathname,os_name:s,os_version:n,browser:hi(d,navigator.vendor),device:di(d),device_type:(i=d,e=di(i),e===St||e===kt||"Kobo"===e||"Kindle Fire"===e||e===Zt?F:e===Ft||e===Lt||e===Wt||e===$t?"Console":e===xt?"Wearable":e?J:"Desktop").toLowerCase(),timezone:gi(),timezone_offset:mi(),raw_user_agent:d.length>1e3?d.substring(0,997)+"...":d,browser_version:li(d,navigator.vendor),browser_language:vi(),browser_language_prefix:(t=vi(),"string"==typeof t?t.split("-")[0]:void 0),screen_resolution:(r&&r.screen.width)+"x"+(r&&r.screen.height),viewport_resolution:(r&&r.innerWidth)+"x"+(r&&r.innerHeight)})})();Object.entries(f).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)}));var p,g,m,w=a?(p=A(a.URL,[],fi),g=V.concat([]),m={},T(g,(function(t){var i=(function(t,i){for(var e,r=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),s=0;s<r.length;s++){var n=r[s].split("=");if(n[0]===i){e=n;break}}if(!_(e)||e.length<2)return"";var o=e[1];try{o=decodeURIComponent(o)}catch{x.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")})(p,t);m[t]=i||null})),m):{};Object.entries(w).forEach((t=>{var[i,e]=t;e&&!l[i]&&(l[i]=e)})),this.STATE.userId&&(l.user_id=this.STATE.userId);var y=null===(s=this.userManager)||void 0===s?void 0:s.getUserData();y&&Object.keys(y).length>0&&Object.entries(y).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)}));var k=null===(n=this.clickIdManager)||void 0===n?void 0:n.getAttributionData();k&&Object.keys(k).length>0&&Object.entries(k).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)}));var S=null===(o=this.adBlockManager)||void 0===o?void 0:o.getAdBlockData();S&&Object.keys(S).length>0&&Object.entries(S).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)})),this.STATE.isNewVisit&&!l[X]&&(l[X]=1),this.STATE.isFirstVisit&&!l[K]&&(l[K]=1);var O=a&&(null===(c=a.location)||void 0===c?void 0:c.hostname)||"",j=pi(),E=this.STATE.ignoreReferrer;if(j&&"$direct"!==j&&(this.CONFIG.ignore_referrer_domains.includes(j)&&(E=!0),O&&O===j&&(E=!0)),E&&!l[H]&&(l[H]=!0),!E&&"$direct"!==j&&!l.page_referrer){var I={page_referrer:a&&a.referrer||"$direct",page_referring_domain:pi()};Object.entries(I).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)}))}return Object.entries(this.STATE.persistentParameters).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)})),l.consent_analytics||(l.consent_analytics=this.STATE.consentStatus.analytics),l.consent_advertising||(l.consent_advertising=this.STATE.consentStatus.advertising),l.consent_personalization||(l.consent_personalization=this.STATE.consentStatus.personalization),l}Ft(t){try{return new URL(t||"").hostname}catch(t){return""}}Ut(t){if(this._retryQueue){var i=t.callback;t.callback=t=>{if(!0===this.CONFIG.cookieless&&t.statusCode<300)try{var e=JSON.parse(t.text);if(e.client_id&&(this.At=e.client_id,this.STATE.consentStatus.analytics))if(this.clientManager&&"function"==typeof this.clientManager.setClientId)this.clientManager.setClientId(e.client_id);else if(this.STATE.clientId=e.client_id,this.persistence&&this.persistence_name){var r=this.persistence.parse(this.persistence_name)||{};r.client_id=e.client_id,this.persistence.set(this.persistence_name,r,this.CONFIG.cookie_expiration,this.CONFIG.cross_subdomain_cookie,this.CONFIG.secure_cookie)}}catch(t){x.error("Error processing server response:",t)}i&&i(t)},this._retryQueue.retriableRequest(t)}else this.D(t)}D(t){if(this.__loaded){if(t.headers=t.headers||{},"sendBeacon"===t.transport&&o&&o.sendBeacon)try{if(o.sendBeacon(t.url,new Blob([JSON.stringify(t.data)],{type:"text/plain"})))return;x.warn("sendBeacon failed, falling back to regular request")}catch(t){x.error("Error in sendBeacon, falling back to regular request:",t)}(t=>{var i,r,s,n=e({},t);n.timeout=n.timeout||6e4,n.url=Y(n.url,{_:""+(new Date).getTime(),ver:v,compression:n.compression});var o=null!==(i=n.transport)&&void 0!==i?i:"fetch",a=null!==(r=null===(s=R(it,(t=>t.transport===o)))||void 0===s?void 0:s.method)&&void 0!==r?r:it[0].method;if(!a)throw Error("No available transport method");a(n)})(e(e({},t),{},{callback:i=>{var e,r,s;i.statusCode>=400&&(x.error("Request error:",i.statusCode,i.text),null===(r=(s=this.CONFIG).on_request_error)||void 0===r||r.call(s,i)),null===(e=t.callback)||void 0===e||e.call(t,i)}}))}else x.warn("TrustData not initialized, cannot send request")}consent(t,i){if(!this.__loaded)return this.push(["consent",t,i]);if(!i||!i.hasOwnProperty("consent"))return x.error("Invalid consent parameters"),!1;var r=i.consent,s=e({},this.STATE.consentStatus);if("analytics"in r&&(this.STATE.consentStatus.analytics=!0===r.analytics||"granted"===r.analytics),"advertising"in r&&(this.STATE.consentStatus.advertising=!0===r.advertising||"granted"===r.advertising),"personalization"in r&&(this.STATE.consentStatus.personalization=!0===r.personalization||"granted"===r.personalization),this.consentManager instanceof _i&&(this.consentManager.optInOut(this.STATE.consentStatus.analytics),this.STATE.consentStatus.analytics&&this.CONFIG.request_batching&&this._requestQueue.enable(),!0===this.CONFIG.cookieless&&s.analytics!==this.STATE.consentStatus.analytics)){var n=this.STATE.clientId,o=this.STATE.userId;if(this.Mt(),this.STATE.consentStatus.analytics){var a=this.At||n;if(a||o){var h=this.persistence.parse(this.persistence_name)||{};a&&(h.client_id=a,this.STATE.clientId=a),o&&(h.user_id=o),this.persistence.set(this.persistence_name,h,this.CONFIG.cookie_expiration,this.CONFIG.cross_subdomain_cookie,this.CONFIG.secure_cookie)}}else if(n){var c=this.persistence.parse(this.persistence_name)||{};c.client_id=n,this.persistence.set(this.persistence_name,c)}}return!0}get(t,i,r){var s,n,o;if("string"==typeof t&&"function"==typeof i&&(r=i,i=t,t=null),!this.__loaded)return this.push(["get",t,i,r]);switch(i){case"client_id":o=this.STATE.clientId;break;case"user_id":o=this.STATE.userId;break;case"session_id":o=null===(s=this.sessionManager)||void 0===s?void 0:s.getSessionId();break;case"user_data":o=(null===(n=this.userManager)||void 0===n?void 0:n.getUserData())||{};break;case"consent_status":o=e({},this.STATE.consentStatus);break;case"debug_mode":o=this.CONFIG.debug;break;default:o=this.STATE.persistentParameters[i]}return"function"==typeof r&&r(o),o}push(t){this.__loaded?_(t)?this.Bt([t]):b(t)&&t.call(this):r.trustdata&&_(r.trustdata)&&r.trustdata.push(t)}}ji.prototype.Wt=function(){this.CONFIG.send_page_view&&this.__loaded&&this.event(W)},r.Lt=r.Lt||{},r.zt=!1;var Ei={};!(function(t,i){for(var e=0;e<5;e++)t.prototype[i[e]]=C(t.prototype[i[e]])})(ji,["event","set","get","consent","push"]),(function(){var t=new ji;Ei[xi]=t;var i=r.trustdata;if(i&&_(i)){i.Gt&&_(i.Gt)&&T(i.Gt,(function(e){if(e&&_(e)){var r=e[2]||xi,s=t.config(e[0],e[1]||{},r);s&&r!==xi&&i[r]&&_(i[r])&&s.Bt(i[r])}}));for(var e=[],s=0;s<i.length;s++){var n=i[s];_(n)&&e.push(n)}e.length>0&&t.Bt(e)}r.trustdata=t,(function(){function t(){t.done||(t.done=!0,Object.values(Ei).forEach((function(t){"function"==typeof t.Wt&&t.Wt()})))}a&&a.addEventListener?"complete"===a.readyState?t():a.addEventListener("DOMContentLoaded",t,{capture:!1,passive:!0}):r&&x.error("Browser doesn't support `document.addEventListener` so TrustData couldn't be initialized")})()})()})();
