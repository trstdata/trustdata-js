!(function(){"use strict";function t(t,i,e){return(i=(function(t){var i=(function(t){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var e=i.call(t,"string");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return t+""})(t);return"symbol"==typeof i?i:i+""})(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function i(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,r)}return e}function e(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?i(Object(s),!0).forEach((function(i){t(e,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var r="undefined"!=typeof window?window:void 0,s="undefined"!=typeof globalThis?globalThis:r,n=Array.prototype.forEach,a=null==s?void 0:s.navigator,o=null==s?void 0:s.document,h=null==s?void 0:s.location,c=null==s?void 0:s.fetch,l=null!=s&&s.XMLHttpRequest&&"withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:void 0,u=null==s?void 0:s.AbortController,d=null==a?void 0:a.userAgent,f=null!=r?r:{},v="1.0.0",p=Object.prototype,g=p.hasOwnProperty,m=p.toString,b=Array.isArray||function(t){return"[object Array]"===m.call(t)},_=t=>"function"==typeof t,y=t=>void 0===t,w=t=>"[object String]"==m.call(t),k=t=>null===t,S=t=>"[object Number]"==m.call(t),O=t=>{var i={t:function(t){},info:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.t("log",...e)},warn:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.t("warn",...e)},error:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.t("error",...e)},critical:function(){for(var t=arguments.length,i=Array(t),e=0;e<t;e++)i[e]=arguments[e]},uninitializedWarning:t=>{i.error("You must initialize TrustData before calling ".concat(t))},createLogger:i=>O("".concat(t," ").concat(i))};return i},x=O("[TrustData.js]"),E=x.createLogger,j={};function I(t,i,e){if(b(t))if(n&&t.forEach===n)t.forEach(i,e);else if("length"in t&&t.length===+t.length)for(var r=0,s=t.length;r<s;r++)if(r in t&&i.call(e,t[r],r)===j)return}function T(t,i,e){if(!y(r=t)&&!k(r)){var r;if(b(t))return I(t,i,e);if((t=>t instanceof FormData)(t)){for(var s of t.entries())if(i.call(e,s[1],s[0])===j)return}else for(var n in t)if(g.call(t,n)&&i.call(e,t[n],n)===j)return}}var R=function(t){for(var i=arguments.length,e=Array(i>1?i-1:0),r=1;r<i;r++)e[r-1]=arguments[r];return I(e,(function(i){for(var e in i)void 0!==i[e]&&(t[e]=i[e])})),t},C=function(t){return function(){try{for(var i=arguments.length,e=Array(i),r=0;r<i;r++)e[r]=arguments[r];return t.apply(this,e)}catch(t){x.critical("Implementation error. Please turn on debug mode"),x.critical(t)}}};function D(t,i){for(var e=0;e<t.length;e++)if(i(t[e]))return t[e]}function P(t,i,e,r){var{capture:s=!1,passive:n=!0}={};null==t||t.addEventListener(i,e,{capture:s,passive:n})}var B=function(t,i,e){if(!t||!i||!i.length)return t;for(var r=t.split("#"),s=r[1],n=(r[0]||"").split("?"),a=n[1],o=n[0],h=(a||"").split("&"),c=[],l=0;l<h.length;l++){var u=h[l].split("=");b(u)&&(i.includes(u[0])?c.push(u[0]+"="+e):c.push(h[l]))}var d=o;return null!=a&&(d+="?"+c.join("&")),null!=s&&(d+="#"+s),d},M="cid",U="uid",A="udata",N="primary_window",z="fv",q=3e3,J="Mobile",L="Tablet",F="page_view",W="page_leave",G="event_name",H="first_visit",X="entrances",$="ignore_referrer",K=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","trdt_cpid","trdt_agid","trdt_kwid","trdt_ctid","mc_cid","gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],V={gclid:"google_ads",gclsrc:"google_ads",gbraid:"google_ads",wbraid:"google_ads",fbclid:"facebook",msclkid:"microsoft",twclid:"twitter",li_fat_id:"linkedin",ttclid:"tiktok",rdt_cid:"reddit",epik:"pinterest",qclid:"quora",sccid:"snapchat",irclid:"impact_radius",dclid:"doubleclick",igshid:"instagram"},Q=!!l||!!c,Y=(t,i)=>{var[r,s]=t.split("?"),n=e({},i);null==s||s.split("&").forEach((t=>{var[i]=t.split("=");delete n[i]}));var a=(function(t,i){var e;void 0===i&&(i="&");var r=[];return T(t,(function(t,i){y(t)||y(i)||"undefined"===i||(e=encodeURIComponent(t instanceof File?t.name:""+t),r[r.length]=encodeURIComponent(i)+"="+e)})),r.join(i)})(n);return a=a?(s?s+"&":"")+a:s,"".concat(r,"?").concat(a)},Z=(t,i)=>JSON.stringify(t,((t,i)=>"bigint"==typeof i?""+i:i),i),tt=t=>{var{data:i,compression:e}=t;if(i){if("base64"===e){var r=(function(t){var i,e,r,s,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,o=0,h="",c=[];if(!t)return t;t=(function(t){var i,e,r,s,n="";for(i=e=0,r=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,s=0;s<r;s++){var a=t.charCodeAt(s),o=null;a<128?e++:o=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),k(o)||(e>i&&(n+=t.substring(i,e)),n+=o,i=e=s+1)}return e>i&&(n+=t.substring(i,t.length)),n})(t);do{i=(s=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>12&63,e=s>>6&63,r=63&s,c[o++]=n.charAt(s>>18&63)+n.charAt(i)+n.charAt(e)+n.charAt(r)}while(a<t.length);switch(h=c.join(""),t.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h})(Z(i)),s=(t=>"data="+encodeURIComponent("string"==typeof t?t:Z(t)))(r);return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var n=Z(i);return{contentType:"application/json",body:n,estimatedSize:new Blob([n]).size}}},it=[];function et(t,i,e,r,s){return S(t)?t>e?(x.warn(r+" cannot be greater than max: "+e+". Using max value instead."),e):t<i?(x.warn(r+" cannot be less than min: "+i+". Using min value instead."),i):t:(x.warn(r+" must be a number. using max or fallback. max: "+e+", fallback: "+s),et(s||e,i,e,r))}c&&it.push({transport:"fetch",method:t=>{var i,r,{contentType:s,body:n,estimatedSize:a}=null!==(i=tt(t))&&void 0!==i?i:{},o=new Headers;T(t.headers,(function(t,i){o.append(i,t)})),s&&o.append("Content-Type",s);var h=t.url,l=null;if(u){var d=new u;l={signal:d.signal,timeout:setTimeout((()=>d.abort()),t.timeout)}}c(h,e({method:(null==t?void 0:t.method)||"GET",headers:o,keepalive:"POST"===t.method&&(a||0)<52428.8,body:n,signal:null===(r=l)||void 0===r?void 0:r.signal},t.fetchOptions)).then((i=>i.text().then((e=>{var r,s={statusCode:i.status,text:e};if(200===i.status)try{s.json=JSON.parse(e)}catch(t){x.error(t)}null===(r=t.callback)||void 0===r||r.call(t,s)})))).catch((i=>{var e;x.error(i),null===(e=t.callback)||void 0===e||e.call(t,{statusCode:0,text:i})})).finally((()=>l?clearTimeout(l.timeout):null))}}),l&&it.push({transport:"XHR",method:t=>{var i,e=new l;e.open(t.method||"GET",t.url,!0);var{contentType:r,body:s}=null!==(i=tt(t))&&void 0!==i?i:{};T(t.headers,(function(t,i){e.setRequestHeader(i,t)})),r&&e.setRequestHeader("Content-Type",r),t.timeout&&(e.timeout=t.timeout),e.withCredentials=!0,e.onreadystatechange=()=>{if(4===e.readyState){var i,r={statusCode:e.status,text:e.responseText};if(200===e.status)try{r.json=JSON.parse(e.responseText)}catch{}null===(i=t.callback)||void 0===i||i.call(t,r)}},e.send(s)}}),null!=a&&a.sendBeacon&&it.push({transport:"sendBeacon",method:t=>{var i=Y(t.url,{beacon:"1"});try{var e,{contentType:r,body:s}=null!==(e=tt(t))&&void 0!==e?e:{},n="string"==typeof s?new Blob([s],{type:r}):s;a.sendBeacon(i,n)}catch{}}});class rt{constructor(t,i){this.i=!0,this.o=[],this.h=void 0,this.l=et((null==i?void 0:i.flush_interval_ms)||q,250,5e3,"flush interval",q),this.u=t}enqueue(t){this.o.push(t),this.h||this.v()}unload(){this.p();var t=this.o.length>0?this.m():{},i=Object.values(t);[...i.filter((t=>0===t.url.indexOf("/e"))),...i.filter((t=>0!==t.url.indexOf("/e")))].map((t=>{this.u(e(e({},t),{},{transport:"sendBeacon"}))}))}enable(){this.i=!1,this.v()}v(){var t=this;this.i||(this.h=setTimeout((()=>{if(this.p(),this.o.length>0){var i=this.m(),e=function(){var e=i[r],s=(new Date).getTime();e.data&&b(e.data)&&T(e.data,(t=>{t.offset=Math.abs(t.timestamp-s),delete t.timestamp})),t.u(e)};for(var r in i)e()}}),this.l))}p(){clearTimeout(this.h),this.h=void 0}m(){var t={};return T(this.o,(i=>{var r,s=i,n=(s?s.batchKey:null)||s.url;y(t[n])&&(t[n]=e(e({},s),{},{data:[]})),null===(r=t[n].data)||void 0===r||r.push(s.data)})),this.o=[],t}}var st=["retriesPerformedSoFar"];class nt{constructor(t){this.k=t,this.S=!1,this.O=void 0,this.j=3e3,this.o=[],this.I=!0,!y(r)&&"onLine"in r.navigator&&(this.I=r.navigator.onLine,P(r,"online",(()=>{this.I=!0,this.T()})),P(r,"offline",(()=>{this.I=!1})))}get length(){return this.o.length}retriableRequest(t){var{retriesPerformedSoFar:i}=t,r=(function(t,i){if(null==t)return{};var e,r,s=(function(t,i){if(null==t)return{};var e={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==i.indexOf(r))continue;e[r]=t[r]}return e})(t,i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)-1===i.indexOf(e=n[r])&&{}.propertyIsEnumerable.call(t,e)&&(s[e]=t[e])}return s})(t,st);S(i)&&i>0&&(r.url=Y(r.url,{retry_count:i})),this.k.R(e(e({},r),{},{callback:t=>{var s;200!==t.statusCode&&(t.statusCode<400||t.statusCode>=500)&&(null!=i?i:0)<10?this.C(e({retriesPerformedSoFar:i},r)):null===(s=r.callback)||void 0===s||s.call(r,t)}}))}C(t){var i=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=i+1;var e=(function(t){var i=3e3*2**t,e=i/2,r=Math.min(18e5,i),s=Math.random()-.5;return Math.ceil(r+s*(r-e))})(i),r=Date.now()+e;this.o.push({retryAt:r,requestOptions:t});var s="Enqueued failed request for retry in ".concat(e);navigator.onLine||(s+=" (Browser is offline)"),x.warn(s),this.S||(this.S=!0,this.D())}D(){this.O&&clearTimeout(this.O),this.O=setTimeout((()=>{this.I&&this.o.length>0&&this.T(),this.D()}),this.j)}T(){var t=Date.now(),i=[],e=this.o.filter((e=>e.retryAt<t||(i.push(e),!1)));if(this.o=i,e.length>0)for(var{requestOptions:r}of e)this.retriableRequest(r)}unload(){for(var{requestOptions:t}of(this.O&&(clearTimeout(this.O),this.O=void 0),this.o))try{this.k.R(e(e({},t),{},{transport:"sendBeacon"}))}catch(t){x.error(t)}this.o=[]}}function at(){return Date.now().toString(36)+Math.random().toString(36).substring(2,9)}function ot(){return Math.floor(Date.now()/1e3)}var ht="",ct=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,lt={is_supported:()=>!!o,error:function(t){x.error("cookieStore error: "+t)},get:function(t){if(o){try{for(var i=t+"=",e=o.cookie.split(";").filter((t=>t.length)),r=0;r<e.length;r++){for(var s=e[r];" "==s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(i))return decodeURIComponent(s.substring(i.length,s.length))}}catch{}return null}},parse:function(t){var i;try{i=JSON.parse(lt.get(t))||{}}catch{}return i},set:function(t,i,e,r,s){if(o)try{var n="",a="",h=(function(t,i){if(i){var e=(function(t,i){if(void 0===i&&(i=o),ht)return ht;if(!i)return"";if(["localhost","127.0.0.1"].includes(t))return"";for(var e=t.split("."),r=Math.min(e.length,8),s="dmn_chk_"+at(),n=RegExp("(^|;)\\s*"+s+"=1");!ht&&r--;){var a=e.slice(r).join("."),h=s+"=1;domain=."+a;i.cookie=h,n.test(i.cookie)&&(i.cookie=h+";expires=Thu, 01 Jan 1970 00:00:00 GMT",ht=a)}return ht})(t);if(!e){var r=(t=>{var i=t.match(ct);return i?i[0]:""})(t);e=r}return e?"; domain=."+e:""}return""})(o.location.hostname,r);if(e){var c=new Date;c.setTime(c.getTime()+24*e*60*60*1e3),n="; expires="+c.toUTCString()}s&&(a="; secure");var l=t+"="+encodeURIComponent(JSON.stringify(i))+n+"; SameSite=Lax; path=/"+h+a;return l.length>3686.4&&x.warn("cookieStore warning: large cookie, len="+l.length),o.cookie=l,l}catch{return}},remove:function(t,i){try{lt.set(t,"",-1,i)}catch{return}}},ut=null,dt={is_supported:function(){if(!k(ut))return ut;var t=!0;if(y(r))t=!1;else try{var i="__mplssupport__";dt.set(i,"xyz"),'"xyz"'!==dt.get(i)&&(t=!1),dt.remove(i)}catch{t=!1}return t||x.error("localStorage unsupported; falling back to cookie store"),ut=t,t},error:function(t){x.error("localStorage error: "+t)},get:function(t){try{return r&&r.localStorage.getItem(t)}catch(t){dt.error(t)}return null},parse:function(t){try{return JSON.parse(dt.get(t))||{}}catch{}return null},set:function(t,i){try{r&&r.localStorage.setItem(t,JSON.stringify(i))}catch(t){dt.error(t)}},remove:function(t){try{r&&r.localStorage.removeItem(t)}catch(t){dt.error(t)}}},ft=[M,U,A,"sid","sn","last","start","wid",N,z],vt=e(e({},dt),{},{parse:function(t){try{var i={};try{i=lt.parse(t)||{}}catch{}var e=R(i,JSON.parse(dt.get(t)||"{}"));return dt.set(t,e),e}catch{}return null},set:function(t,i,e,r,s,n){try{dt.set(t,i,void 0,void 0,n);var a={};ft.forEach((t=>{i[t]&&(a[t]=i[t])})),Object.keys(a).length&&lt.set(t,a,e,r,s,n)}catch(t){dt.error(t)}},remove:function(t,i){try{r&&r.localStorage.removeItem(t),lt.remove(t,i)}catch(t){dt.error(t)}}}),pt={},gt={is_supported:function(){return!0},error:function(t){x.error("memoryStorage error: "+t)},get:function(t){return pt[t]||null},parse:function(t){return pt[t]||null},set:function(t,i){pt[t]=i},remove:function(t){delete pt[t]}};function mt(t,i){return-1!==t.indexOf(i)}var bt=J,_t="iOS",yt="Android",wt=L,kt=yt,St="iPad",Ot="Apple",xt=Ot+" Watch",Et="Safari",jt="BlackBerry",It="Samsung",Tt=It+"Browser",Rt=It+" Internet",Ct="Chrome",Dt=Ct+" OS",Pt=Ct+" "+_t,Bt="Internet Explorer",Mt=Bt,Ut="Opera",At=Ut+" Mini",Nt="Edge",zt="Edge",qt="Firefox",Jt=qt+" "+_t,Lt="Nintendo",Ft="PlayStation",Wt="Xbox",Gt=yt,Ht=Et,Xt="Windows",$t=Xt+" Phone",Kt="Nokia",Vt="Ouya",Qt="Generic",Yt=Qt+" "+bt.toLowerCase(),Zt=Qt+" "+wt.toLowerCase(),ti="Konqueror",ii="(\\d+(\\.\\d+)?)",ei=RegExp("Version/"+ii),ri=RegExp(Wt,"i"),si=RegExp(Ft+" \\w+","i"),ni=RegExp(Lt+" \\w+","i"),ai=RegExp(jt+"|PlayBook|BB10","i"),oi={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},hi=function(t,i){return i=i||"",mt(t," OPR/")&&mt(t,"Mini")?At:mt(t," OPR/")?Ut:ai.test(t)?jt:mt(t,"IE"+bt)||mt(t,"WPDesktop")?Mt:mt(t,Tt)?Rt:mt(t,Nt)||mt(t,"Edg/")?zt:mt(t,"FBIOS")?"Facebook "+bt:mt(t,"UCWEB")||mt(t,"UCBrowser")?"UC Browser":mt(t,"CriOS")?Pt:mt(t,"CrMo")||mt(t,Ct)?Ct:mt(t,yt)&&mt(t,Et)?Gt:mt(t,"FxiOS")?Jt:mt(t.toLowerCase(),"konqueror")?ti:((t,i)=>i&&mt(i,Ot)||(function(t){return mt(t,Et)&&!mt(t,Ct)&&!mt(t,yt)})(t))(t,i)?mt(t,bt)?Ht:Et:mt(t,qt)?qt:mt(t,"MSIE")||mt(t,"Trident/")?Bt:mt(t,"Gecko")?qt:""},ci={[Mt]:[RegExp("rv:"+ii)],[zt]:[RegExp(Nt+"?\\/"+ii)],[Ct]:[RegExp("("+Ct+"|CrMo)\\/"+ii)],[Pt]:[RegExp("CriOS\\/"+ii)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+ii)],[Et]:[ei],[Ht]:[ei],[Ut]:[RegExp("(Opera|OPR)\\/"+ii)],[qt]:[RegExp(qt+"\\/"+ii)],[Jt]:[RegExp("FxiOS\\/"+ii)],[ti]:[RegExp("Konqueror[:/]?"+ii,"i")],[jt]:[RegExp(jt+" "+ii),ei],[Gt]:[RegExp("android\\s"+ii,"i")],[Rt]:[RegExp(Tt+"\\/"+ii)],[Bt]:[RegExp("(rv:|MSIE )"+ii)],Mozilla:[RegExp("rv:"+ii)]},li=function(t,i){var e=hi(t,i),r=ci[e];if(y(r))return null;for(var s=0;s<r.length;s++){var n=t.match(r[s]);if(n)return parseFloat(n[n.length-2])}return null},ui=[[RegExp(Wt+"; "+Wt+" (.*?)[);]","i"),t=>[Wt,t&&t[1]||""]],[RegExp(Lt,"i"),[Lt,""]],[RegExp(Ft,"i"),[Ft,""]],[ai,[jt,""]],[RegExp(Xt,"i"),(t,i)=>{if(/Phone/.test(i)||/WPDesktop/.test(i))return[$t,""];if(RegExp(bt).test(i)&&!/IEMobile\b/.test(i))return[Xt+" "+bt,""];var e=/Windows NT ([0-9.]+)/i.exec(i);if(e&&e[1]){var r=oi[e[1]]||"";return/arm/i.test(i)&&(r="RT"),[Xt,r]}return[Xt,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>t&&t[3]?[_t,[t[3],t[4],t[5]||"0"].join(".")]:[_t,""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var i="";return t&&t.length>=3&&(i=y(t[2])?t[3]:t[2]),["watchOS",i]}],[RegExp("("+yt+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+yt+")","i"),t=>t&&t[2]?[yt,[t[2],t[3],t[4]||"0"].join(".")]:[yt,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var i=["Mac OS X",""];return t&&t[1]&&(i[1]=[t[1],t[2],t[3]||"0"].join(".")),i}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Dt,""]],[/Linux|debian/i,["Linux",""]]],di=function(t){return ni.test(t)?Lt:si.test(t)?Ft:ri.test(t)?Wt:RegExp(Vt,"i").test(t)?Vt:RegExp("("+$t+"|WPDesktop)","i").test(t)?$t:/iPad/.test(t)?St:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?xt:ai.test(t)?jt:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":RegExp(Kt,"i").test(t)?Kt:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!RegExp(bt).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?yt:kt:yt:RegExp("(pda|"+bt+")","i").test(t)?Yt:RegExp(wt,"i").test(t)&&!RegExp(wt+" pc","i").test(t)?Zt:""},fi="<masked>";function vi(){return navigator.language||navigator.userLanguage}function pi(){var t;return!o&&o.referrer?"$direct":(null===(t=(t=>{var i=o&&o.createElement("a");return y(i)?null:(i.href=t,i)})(o.referrer))||void 0===t?void 0:t.host)||"$direct"}function gi(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function mi(){try{return(new Date).getTimezoneOffset()}catch{return}}class bi{constructor(t){this._config=t.CONFIG,this.P=void 0,this.B=t.STATE}get consent(){return this.M()?0:this.U}isOptedOut(){return 0===this.consent||-1===this.consent&&this._config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(t){this.A.set(this.N,t?1:0,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),this.B&&(this.B.consentStatus=e(e({},this.B.consentStatus),{},{analytics:t}))}reset(){this.A.remove(this.N,this._config.cross_subdomain_cookie)}get N(){var{attribution_ids:t,opt_out_capturing_cookie_prefix:i}=this._config;return(i||"__tr_opt_in_out_")+t[0]}get U(){var t=this.A.get(this.N);return"1"===t?1:"0"===t?0:-1}get A(){if(!this.P){var t=this._config.opt_out_capturing_persistence_type;this.P="localStorage"===t?dt:lt;var i="localStorage"===t?lt:dt;i.get(this.N)&&(this.P.get(this.N)||this.optInOut("1"===i.get(this.N)),i.remove(this.N,this._config.cross_subdomain_cookie))}return this.P}M(){return!!this._config.respect_dnt&&!!D([null==a?void 0:a.doNotTrack,null==a?void 0:a.msDoNotTrack,f.doNotTrack],(t=>mt([!0,1,"1","yes"],t)))}}class _i{constructor(t){this.logger=E("[SessionManager]"),this._config=t.CONFIG,this.B=t.STATE,this.q=t.consentManager,this.J=t.persistence;var i=this._config.persistence_name||"_trdt";this.SESSION_DATA_KEY=i+"_sdata",this.SESSION_NUMBER_KEY=i+"_sn",this.WINDOW_ID_KEY=i+"_wid",this.PRIMARY_WINDOW_KEY=i+"_"+N,this._sessionId=null,this._sessionActivityTimestamp=null,this._sessionStartTimestamp=null,this.L=null,this.windowId=null,this.sessionChangeHandlers=[],this.sessionTimer=null,this.F(),this.initSession(!0)}W(){return 60*Math.min(Math.max(this._config.sessionTimeout||30,1),600)*1e3}G(){var t=this.q.isOptedIn()&&!this._config.disable_persistence&&this.J;return this.q.isOptedIn(),t}H(){try{return"undefined"!=typeof sessionStorage&&null!==sessionStorage}catch(t){return x.error("Error accessing sessionStorage:",t),!1}}X(){if(this.windowId)return this.windowId;if(this.H())try{var t=sessionStorage.getItem(this.WINDOW_ID_KEY);if(t)return t}catch(t){x.error("Error reading window ID from sessionStorage:",t)}return null}$(t){if(t!==this.windowId&&(this.windowId=t,this.H()))try{sessionStorage.setItem(this.WINDOW_ID_KEY,t)}catch(t){x.error("Error storing window ID in sessionStorage:",t)}}F(){if(this.H())try{var t=sessionStorage.getItem(this.WINDOW_ID_KEY),i=sessionStorage.getItem(this.PRIMARY_WINDOW_KEY);t&&!i?this.windowId=t:sessionStorage.removeItem(this.WINDOW_ID_KEY),sessionStorage.setItem(this.PRIMARY_WINDOW_KEY,"true"),window.addEventListener("beforeunload",(()=>{sessionStorage.removeItem(this.PRIMARY_WINDOW_KEY)}))}catch(t){x.error("Error initializing window tracking:",t)}}K(t,i,e){if((t!==this._sessionId||i!==this._sessionActivityTimestamp||e!==this._sessionStartTimestamp)&&(this._sessionId=t,this._sessionActivityTimestamp=i,this._sessionStartTimestamp=e,this.G()))try{var r=[i,t,e];if(!this.J||"function"!=typeof this.J.set)return void x.error("Persistence layer is not properly initialized");this.J.set(this.SESSION_DATA_KEY,JSON.stringify(r),this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),this.J.get(this.SESSION_DATA_KEY)}catch(t){x.error("Error storing session data:",t)}}V(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];if(this.G())try{var t=this.J.get(this.SESSION_DATA_KEY);if(t){var i;try{i=JSON.parse(JSON.parse(t))}catch(e){try{i=JSON.parse(t)}catch(i){return x.error("Unable to parse session data:",t,i),[0,null,0]}}if(Array.isArray(i))return 2===i.length&&i.push(i[0]),this._sessionActivityTimestamp=i[0],this._sessionId=i[1],this._sessionStartTimestamp=i[2],i;x.error("Stored session data is not an array:",i)}}catch(t){x.error("Error reading session data:",t)}return[0,null,0]}Y(){if(this.L)return this.L;if(this.G())try{var t=this.J.get(this.SESSION_NUMBER_KEY);if(t){var i=parseInt(t)||1;return this.L=i,i}}catch(t){x.error("Error reading session number:",t)}return 1}Z(t){if(this.L=t,this.G())try{this.J.set(this.SESSION_NUMBER_KEY,""+t,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),this.J.get(this.SESSION_NUMBER_KEY)}catch(t){x.error("Error storing session number:",t)}}tt(t,i){return t>0&&i-t>864e5}checkAndGetSessionAndWindowId(t,i){void 0===t&&(t=!1),void 0===i&&(i=null);var e=i||(new Date).getTime();if(this.G()){var r=this.J.get(this.SESSION_DATA_KEY);try{r&&JSON.parse(r)}catch(t){x.error("Error parsing raw session data:",t)}}var s,[n,a,o]=this.V(),h=this.X(),c=this.Y(),l=o>0&&e-o>864e5,u=!1,d=!a,f=!t&&n>0&&e-n>this.W();this.W(),d||f||l?(a=ot(),h=at(),o=e,c++,this.Z(c),u=!0):h||(h=at(),u=!0),s=!t||u||0===n?e:n;var v=0===o?e:o;return this.$(h),this.K(a,s,v),this.B?(this.B.sessionId=a,this.B.sessionNumber=c,this.B.sessionEngaged=!u,this.B.isNewVisit=u):x.error("State object is not available"),t||this.refreshSessionTimer(),u&&this.it(a,h,u?{noSessionId:d,activityTimeout:f,sessionPastMaximumLength:l}:void 0),{sessionId:a,windowId:h,sessionStartTimestamp:v,sessionNumber:c,changeReason:u?{noSessionId:d,activityTimeout:f,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:s}}initSession(t){return void 0===t&&(t=!1),this.checkAndGetSessionAndWindowId(t)}refreshSessionTimer(){clearTimeout(this.sessionTimer);var t=1.1*this.W();this.sessionTimer=setTimeout((()=>{this.resetSession()}),t)}resetSession(){this.K(null,0,0),this.initSession()}onSessionChange(t){return this.sessionChangeHandlers.push(t),this._sessionId&&t(this._sessionId,this.windowId),()=>{this.sessionChangeHandlers=this.sessionChangeHandlers.filter((i=>i!==t))}}it(t,i,e){this.sessionChangeHandlers.forEach((r=>{try{r(t,i,e)}catch(t){x.error("Error in session change handler:",t)}}))}getSessionId(){return this._sessionId||this.B&&this.B.sessionId||null}getWindowId(){return this.X()}}class yi{constructor(t){this._config=t.CONFIG,this.B=t.STATE,this.J=t.persistence,this.q=t.consentManager,this.clientId=null,this.isFirstVisit=!1}initClientId(t){void 0===t&&(t={});var i=this.G(),e=this._config.persistence_name||"_trdt",r=t.client_id;if(!r&&i&&(r=this.J.get(e+"_"+M))&&r.startsWith('"')&&r.endsWith('"'))try{r=JSON.parse(r)}catch(t){x.error("Error parsing stored client ID",t)}var s=i&&this.J.get(e+"_"+z);return r?(this.clientId=r,this.isFirstVisit=!s):(this.clientId=!0!==this._config.cookieless||this.q.isOptedIn()?Math.floor(2147483647*Math.random())+"."+ot():null,this.isFirstVisit=!0,i&&this.clientId&&(this.et(this.clientId),this.rt())),this.B.clientId=this.clientId,this.B.isFirstVisit=this.isFirstVisit,this.clientId}et(t){if(this.G()&&t){var i=this._config.persistence_name||"_trdt",e=this._config.cookie_expiration,r=this._config.cross_subdomain_cookie,s=this._config.secure_cookie,n=t&&"string"==typeof t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t;this.J.set(i+"_"+M,n,e,r,s)}}rt(){if(this.G()&&this.isFirstVisit){var t=this._config.persistence_name||"_trdt",i=this._config.cookie_expiration,e=this._config.cross_subdomain_cookie,r=this._config.secure_cookie,s=""+Date.now();this.J.set(t+"_"+z,s,i,e,r)}}setClientId(t){if(!t)return!1;var i=t&&"string"==typeof t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t;return this.clientId=i,this.B.clientId=i,this.G()&&this.et(i),!0}getClientId(){return this.clientId}setServerGeneratedClientId(t){if(!t)return!1;if((!0===this._config.cookieless||!this.clientId)&&t!==this.clientId){if(this.clientId=t,this.B.clientId=t,this.J)try{var i=this.J.parse(this._config.persistence_name)||{};i.client_id=t,this.J.set(this._config.persistence_name,i)}catch(t){x.error("Error storing server-generated client ID:",t)}return this.G()&&this.et(t),!0}return!1}G(){return this.q.isOptedIn()&&!this._config.disable_persistence}}class wi{constructor(t){this._config=t.CONFIG,this.J=t.persistence,this.persistence_name=this._config.persistence_name||"_trdt",this.storageKey=this.persistence_name+"_click_ids",this.st()}st(){this.nt(),this.ot()}nt(){if("undefined"!=typeof window&&window.location){var t=new URLSearchParams(window.location.search),i={},e=!1;K.forEach((r=>{var s=t.get(r);s&&(i[r]=s,e=!0)})),e&&this.ht(i)}}ht(t){var i=Date.now(),e={clickIds:t,timestamp:i,referrer:document.referrer||null},r=this.ct();r.entries.push(e),r.entries.length>50&&(r.entries=r.entries.slice(-50)),r.lastUpdated=i,this.lt(r)}ct(){try{if(this.J&&"function"==typeof this.J.get){var t=this.J.get(this.storageKey);if(t){var i="string"==typeof t?JSON.parse(t):t;if(i&&i.entries&&Array.isArray(i.entries))return i}}}catch(t){x.error("Error reading stored click IDs:",t)}return{entries:[],lastUpdated:null,version:"1.0"}}lt(t){try{this.J&&"function"==typeof this.J.set&&this.J.set(this.storageKey,t,90,this._config.cross_subdomain_cookie,this._config.secure_cookie)}catch(t){x.error("Error saving click ID data:",t)}}ot(){var t=this.ct(),i=Date.now()-7776e6,e=t.entries.length;t.entries=t.entries.filter((t=>t.timestamp>i)),t.entries.length!==e&&this.lt(t)}getLatestClickIds(){var t=this.ct();return t.entries.length>0?t.entries[t.entries.length-1]:null}getClickIdsInWindow(t){void 0===t&&(t=30);var i=this.ct(),e=Date.now()-24*t*60*60*1e3;return i.entries.filter((t=>t.timestamp>e))}getClickIdsByParam(t,i){return void 0===i&&(i=30),this.getClickIdsInWindow(i).filter((i=>i.clickIds[t])).map((i=>({value:i.clickIds[t],timestamp:i.timestamp})))}getLatestClickIdsByPlatform(t){void 0===t&&(t=30);for(var i=this.getClickIdsInWindow(t),e={},r=function(){var t=i[s];Object.entries(t.clickIds).forEach((i=>{var[r,s]=i,n=V[r];n&&!e[n]&&(e[n]={platform:n,clickIdParam:r,value:s,timestamp:t.timestamp,referrer:t.referrer})}))},s=i.length-1;s>=0;s--)r();return e}getAttributionData(t){void 0===t&&(t=30);var i=this.getLatestClickIdsByPlatform(t),e={};Object.values(i).forEach((t=>{var{clickIdParam:i,value:r,timestamp:s}=t;e[i]=r,e["_".concat(i,"_timestamp")]=s}));var r=Object.keys(i);return r.length>0&&(e._attribution_platforms=r.join(","),e._attribution_count=r.length),e}getConversionTrackingRequirements(t){void 0===t&&(t=30);var i=this.getLatestClickIdsByPlatform(t),e={platforms:[],clickIds:{},shouldTrackConversions:Object.keys(i).length>0};return Object.entries(i).forEach((t=>{var[i,r]=t;e.platforms.push(i),e.clickIds[i]={param:r.clickIdParam,value:r.value,timestamp:r.timestamp}})),e}getConversionData(t){void 0===t&&(t=30);var i=this.getLatestClickIdsByPlatform(t),e={};return Object.entries(i).forEach((t=>{var[i,r]=t;switch(i){case"google_ads":e.google_ads={gclid:"gclid"===r.clickIdParam?r.value:null,gbraid:"gbraid"===r.clickIdParam?r.value:null,wbraid:"wbraid"===r.clickIdParam?r.value:null,timestamp:r.timestamp,shouldSendConversion:!0};break;case"facebook":e.facebook={fbclid:r.value,timestamp:r.timestamp,shouldSendConversion:!0};break;case"microsoft":e.microsoft={msclkid:r.value,timestamp:r.timestamp,shouldSendConversion:!0};break;default:e[i]={clickId:r.value,param:r.clickIdParam,timestamp:r.timestamp,shouldSendConversion:!0}}})),e}clearClickIds(){try{this.J&&"function"==typeof this.J.remove&&this.J.remove(this.storageKey,this._config.cross_subdomain_cookie)}catch(t){x.error("Error clearing click IDs:",t)}}}class ki{constructor(t){this._config=t.CONFIG,this.J=t.persistence,this.persistence_name=this._config.persistence_name||"_trdt",this.storageKey=this.persistence_name+"_adblock_status",this.testUrls={google_tag_manager:["https://www.googletagmanager.com/gtm.js"],google_ads:["https://googleads.g.doubleclick.net/pagead/ads","https://www.googleadservices.com/pagead/aclk","https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"],google_analytics:["https://www.google-analytics.com/analytics.js"],facebook_ads:["https://connect.facebook.net/en_US/fbevents.js","https://www.facebook.com/tr"],microsoft_ads:["https://bat.bing.com/bat.js","https://www.bing.com/bat.js"],snapchat_ads:["https://sc-static.net/scevent.min.js","https://tr.snapchat.com/cm/i"],twitter_ads:["https://static.ads-twitter.com/uwt.js","https://analytics.twitter.com/i/adsct"],tiktok_ads:["https://analytics.tiktok.com/i18n/pixel/events.js","https://analytics.tiktok.com/i18n/pixel/static/"],amazon_ads:["https://s.amazon-adsystem.com/iu3","https://c.amazon-adsystem.com/aax2/amzn_ads.js"],criteo_ads:["https://static.criteo.net/js/ld/ld.js","https://cas.criteo.com/delivery/ajs.php"],outbrain_ads:["https://widgets.outbrain.com/outbrain.js","https://amplify.outbrain.com/cp/obtp.js"],taboola_ads:["https://cdn.taboola.com/libtrc/publisher/loader.js","https://trc.taboola.com/sg/publisher/load"]},this.detectionResults={anyAdblocker:null,domAdblocker:null,braveShields:null,operaAdblocker:null,platformBlocking:{},detectedAt:null,lastChecked:null},this.ut()}ut(){this.dt(),(!this.detectionResults.lastChecked||Date.now()-this.detectionResults.lastChecked>864e5)&&this.ft()}dt(){try{if(this.J&&"function"==typeof this.J.get){var t=this.J.get(this.storageKey);if(t){var i="string"==typeof t?JSON.parse(t):t;i&&i.lastChecked&&(this.detectionResults=e(e({},this.detectionResults),i))}}}catch(t){x.error("Error loading cached ad block results:",t)}}vt(){try{this.J&&"function"==typeof this.J.set&&this.J.set(this.storageKey,this.detectionResults,30,this._config.cross_subdomain_cookie,this._config.secure_cookie)}catch(t){x.error("Error saving ad block detection results:",t)}}async ft(){try{this.detectionResults.lastChecked=Date.now();var t=await Promise.allSettled([this.gt(),this.bt(),this._t()]);this.detectionResults.domAdblocker="fulfilled"===t[0].status?t[0].value:null,this.detectionResults.braveShields="fulfilled"===t[1].status?t[1].value:null,this.detectionResults.operaAdblocker="fulfilled"===t[2].status?t[2].value:null,await this.yt(),this.detectionResults.anyAdblocker=this.wt(),this.detectionResults.anyAdblocker&&(this.detectionResults.detectedAt=Date.now()),this.vt()}catch(t){x.error("Error during ad block detection:",t)}}async yt(){var t=[];Object.entries(this.testUrls).forEach((i=>{var[e,r]=i;t.push(this.kt(e,r))})),(await Promise.allSettled(t)).forEach(((t,i)=>{var e;this.detectionResults.platformBlocking[Object.keys(this.testUrls)[i]]="fulfilled"===t.status?t.value:{blocked:!1,error:(null===(e=t.reason)||void 0===e?void 0:e.message)||"Unknown error"}}))}async kt(t,i){var e={platform:t,blocked:!1,blockedUrls:[],totalUrls:i.length,blockedCount:0},r=i.map((t=>this.St(t)));return(await Promise.allSettled(r)).forEach(((t,r)=>{"fulfilled"===t.status&&t.value.blocked&&(e.blockedUrls.push({url:i[r],reason:t.value.reason}),e.blockedCount++)})),e.blocked=e.blockedCount>0,e.blockingPercentage=e.blockedCount/e.totalUrls*100,e}async St(t){return new Promise((e=>{if("undefined"!=typeof XMLHttpRequest){var r=new XMLHttpRequest,s=Date.now();r.onreadystatechange=function(){if(4===r.readyState){var n=Date.now(),a=i({status:r.status,responseLength:r.responseText.length,duration:n-s,url:t});e(a)}},r.onerror=function(){e({blocked:!0,reason:"Network error"})},r.ontimeout=function(){e({blocked:!0,reason:"Request timeout"})},r.timeout=3e3;try{r.open("GET",t,!0),r.send()}catch(t){e({blocked:!0,reason:"Request failed: "+t.message})}}else e({blocked:!1,reason:"XMLHttpRequest not available"})}));function i(t){var{status:i,responseLength:e,duration:r,url:s}=t;if(200===i&&0===e)return{blocked:!0,reason:"Empty response (likely Brave)"};if(0===i)return{blocked:!0,reason:"Status 0 (likely Opera or network block)"};if(404===i||403===i)return{blocked:!0,reason:"HTTP ".concat(i," (blocked by server/proxy)")};if(200===i&&e>0){var n=xhttp.responseText.toLowerCase(),a=[/^\s*$/,/^\/\*\s*\*\/\s*$/,/blocked?\s*by\s*(ad|adblocker|adblock)/,/ublock/i,/adguard/i,/ghostery/i,/^(function\(\)\{\}|void\s*0?|null|undefined)\s*;?\s*$/,/^\s*\/\*\s*(blocked|replaced|removed)\s*\*\/\s*$/i,/content\s*(blocked|filtered|removed)/i,/access\s*denied/i,/not\s*available/i,e<50&&s.includes(".js")?/^.{1,49}$/:null].filter(Boolean),o=(function(t){var i=t.toLowerCase();return i.includes("google-analytics.com")||i.includes("googletagmanager.com")?[/google/i,/analytics/i,/gtag/i,/dataLayer/i]:i.includes("googlesyndication.com")||i.includes("googleadservices.com")?[/google/i,/ads/i,/adsbygoogle/i,/pagead/i]:i.includes("facebook.net")||i.includes("facebook.com/tr")?[/facebook/i,/fbq/i,/_fbq/i,/pixel/i]:i.includes("bing.com")||i.includes("bat.bing.com")?[/bing/i,/microsoft/i,/uet/i,/bat/i]:i.includes("snapchat.com")||i.includes("sc-static.net")?[/snapchat/i,/snap/i,/pixel/i]:i.includes("twitter.com")||i.includes("ads-twitter.com")?[/twitter/i,/twq/i,/analytics/i]:i.includes("tiktok.com")?[/tiktok/i,/ttq/i,/pixel/i]:i.includes("amazon-adsystem.com")?[/amazon/i,/amzn/i,/adsystem/i]:i.includes(".js")?[/function/i,/var\s+/i,/window\./i,/document\./i,/\{.*\}/s]:null})(s);if(o&&!o.some((t=>t.test(n))))return{blocked:!0,reason:"Missing expected content (likely replaced)"};for(var h of a)if(h.test(n))return{blocked:!0,reason:"Content replaced by ad blocker"};if(s.includes(".js")&&e<100)return{blocked:!0,reason:"Suspiciously small JS file (likely replaced)"}}return r<10&&0===e?{blocked:!0,reason:"Suspiciously fast empty response"}:0===i&&r>100?{blocked:!0,reason:"CORS/Network block"}:200===i&&e>0?{blocked:!1,reason:"Request successful"}:{blocked:!1,reason:"Unclear (status: ".concat(i,", length: ").concat(e,")")}}}wt(){return!!(this.detectionResults.domAdblocker||this.detectionResults.braveShields||this.detectionResults.operaAdblocker)||Object.values(this.detectionResults.platformBlocking).some((t=>!0===t.blocked))}async Ot(){return!!this.xt()||Object.values(this.detectionResults.platformBlocking).some((t=>!0===t.blocked))}xt(){if("undefined"==typeof window||!window.document)return!1;if(window.document.body&&null!==window.document.body.getAttribute("abp"))return!0;var t=this.Et();if(!t)return!1;window.document.body.appendChild(t);var i=this.jt(t);return window.document.body.removeChild(t),i}async gt(){return this.xt()}async bt(){return!!this.It()&&Object.values(this.detectionResults.platformBlocking).some((t=>!0===t.blocked))}async _t(){return!!this.Tt()&&Object.values(this.detectionResults.platformBlocking).some((t=>!0===t.blocked))}It(){return"undefined"!=typeof navigator&&void 0!==navigator.brave&&void 0!==navigator.brave.isBrave}Tt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.match(/Opera|OPR\//)}Et(){if("undefined"==typeof document)return null;var t=document.createElement("div");return t.setAttribute("class","pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links ad-text adSense adBlock adContent adBanner"),t.setAttribute("style","width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;"),t}jt(t){if(!t)return!1;if(null===t.offsetParent||0==t.offsetHeight||0==t.offsetLeft||0==t.offsetTop||0==t.offsetWidth||0==t.clientHeight||0==t.clientWidth)return!0;if("undefined"!=typeof window&&void 0!==window.getComputedStyle){var i=window.getComputedStyle(t,null);if(i&&("none"==i.getPropertyValue("display")||"hidden"==i.getPropertyValue("visibility")))return!0}return!1}}class Si{constructor(t){this._config=t.CONFIG,this.B=t.STATE,this.J=t.persistence,this.q=t.consentManager,this.userId=null,this.userData={},this.identifiers={}}initUser(t){void 0===t&&(t={});var i=this.G(),e=this._config.persistence_name||"_trdt";if(this.userId=t.user_id||i&&this.J.get(e+"_"+U),i)try{var r=this.J.get(e+"_"+A);r&&(this.userData=JSON.parse(r))}catch(t){x.error("Error parsing stored user data",t),this.userData={}}return this.B.userId=this.userId,this.userData}setUserId(t){return!!t&&(this.userId=t,this.B.userId=t,this.G()&&this.J.set((this._config.persistence_name||"_trdt")+"_"+U,t,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),!0)}setUserData(t){if((i=t)!==Object(i)||b(i))return!1;var i;if(this.userData=e(e({},this.userData),t),this.G()){var r=this._config.cookie_expiration,s=this._config.cross_subdomain_cookie,n=this._config.secure_cookie;this.J.set((this._config.persistence_name||"_trdt")+"_"+A,JSON.stringify(this.userData),r,s,n)}return!0}setIdentifier(t,i){return!(!w(t)||!w(i)||(this.identifiers[t]=i,0))}getUserData(){return e(e({},this.userData),this.identifiers)}getUserId(){return this.userId}G(){return this.q.isOptedIn()&&!this._config.disable_persistence}}var Oi=()=>{},xi="trustdata";!Q&&-1===(null==d?void 0:d.indexOf("MSIE"))&&(null==d||d.indexOf("Mozilla"));class Ei{__loaded=!1;CONFIG=(()=>{var t;return{api_host:"https://t.trstdata.com",api_endpoint:"/api/events",attribution_ids:[],ignore_referrer_domains:[],cross_subdomain_cookie:!0,persistence:"localStorage+cookie",persistence_name:"_trdt",cookieless:!1,debug:!1,loaded:Oi,cookie_expiration:365,disable_persistence:!1,disable_compression:!0,secure_cookie:r&&"https:"===(null===(t=r.location)||void 0===t?void 0:t.protocol),request_batching:!0,properties_string_max_length:65535,session_timeout:30,on_request_error:t=>{x.error("Bad HTTP status: "+t.statusCode+" "+t.text)},send_page_view:!0,onCapture:Oi,flush_interval_ms:q}})();constructor(){this.STATE={clientId:null,userId:null,sessionId:null,sessionNumber:1,sessionEngaged:!1,isNewVisit:!1,isFirstVisit:!1,ignoreReferrer:!1,consentStatus:{analytics:!1,advertising:!1,personalization:!1},persistentParameters:{},initializedTargets:new Set},this.Rt=null,this.logger=E("[TrustData.js]"),this.consentManager=new bi(this)}config(t,i,e){var r;if(void 0===i&&(i={}),void 0===e&&(e=null),!e||e===xi)return this._config(t,i,e);var s=null!==(r=ji[e])&&void 0!==r?r:new Ei;return s._config(t,i,e),ji[e]=s,ji[xi][e]=s,s}Ct(t){if(b(t)){var i=[],e=[],r=[];T(t,(t=>{if(t){var s=t[0];b(s)?r.push(t):_(t)?t.call(this):b(t)&&"config"===s?i.push(t):b(t)&&-1!==s.indexOf("event")&&_(this[s])?r.push(t):e.push(t)}}));var s=t=>{T(t,(t=>{if(b(t[0])){var i=this;T(t,(t=>{i=i[t[0]].apply(i,t.slice(1))}))}else"function"==typeof this[t[0]]?this[t[0]].apply(this,t.slice(1)):x.warn("Unknown command:",t[0])}))};s(i),s(e),s(r)}}_config(t,i,e){return void 0===i&&(i={}),this.__loaded?(x.warn("You have already initialized TrustData! Re-initializing is a no-op"),this):(t&&!this.CONFIG.attribution_ids.includes(t)&&this.CONFIG.attribution_ids.push(t),t?(i.ignoreReferrerDomains&&(this.CONFIG.ignore_referrer_domains=Array.isArray(i.ignoreReferrerDomains)?i.ignoreReferrerDomains:[i.ignoreReferrerDomains]),Object.keys(i).forEach((t=>{t in this.CONFIG&&(this.CONFIG[t]=i[t])})),i.consent&&this.consent("update",{consent:i.consent}),this.Dt(),this._requestQueue=new rt((t=>this.Pt(t)),{flush_interval_ms:this.CONFIG.flush_interval_ms}),this._retryQueue=new nt(this),this.clientManager=new yi(this),this.userManager=new Si(this),this.clickIdManager=new wi(this),this.adBlockManager=new ki(this),this.clientManager.initClientId(i),this.userManager.initUser(i),this.sessionManager=new _i(this),this.__loaded=!0,this.consentManager.isOptedIn()&&this.CONFIG.request_batching&&this._requestQueue.enable(),this.Bt(),r.Mt=!0,t&&this.STATE.initializedTargets.add(t),!1!==i.send_page_view&&setTimeout((()=>this.event(F,{send_to:t})),50),"function"==typeof this.CONFIG.loaded&&this.CONFIG.loaded(this),!0):(x.critical("TrustData was initialized without a target ID. This likely indicates a misconfiguration."),this))}Dt(){var t=this.CONFIG,i=t.persistence;!0!==t.cookieless||this.STATE.consentStatus.analytics||(i="memory"),this.persistence="localStorage"===i?dt:"cookie"===i?lt:"memory"===i?gt:vt,this.sessionPersistence="sessionStorage"===this.CONFIG.persistence?this.persistence:e(e({},this.persistence),{},{persistence:"sessionStorage"}),this.persistence_name=t.persistence_name||"_trdt"}Bt(){var t="onpagehide"in self?"pagehide":"unload";r.addEventListener(t,this.Ut.bind(this),{passive:!1})}Ut(){this.CONFIG.request_batching?(this.event(W),this._requestQueue.unload(),this._retryQueue.unload()):this.event(W,null,{transport:"sendBeacon"})}set(t,i){if(!this.__loaded)return this.push(["set",t,i]);if("object"==typeof t)return Object.entries(t).forEach((t=>{var[i,e]=t;return this.set(i,e)})),!0;if("function"==typeof i)try{i=i()}catch(t){return x.error("Error processing function value:",t),!1}switch("string"==typeof i&&(i=i.substring(0,100)),t){case"user_id":this.STATE.userId=i,this.userManager.setUserId(i);break;case"client_id":this.clientManager.setClientId(i);break;case"debug_mode":this.CONFIG.debug=!0===i||"true"===i;break;case"page_referrer":case"page_location":case"page_title":this.STATE.persistentParameters[t]=i,"ignore_referrer"===t&&(this.STATE.ignoreReferrer=!0===i||"true"===i);break;case"user_data":"object"==typeof i&&this.userManager.setUserData(i);break;case"email_hash":case"phone_hash":this.userManager.setIdentifier(t,i);break;default:this.STATE.persistentParameters[t]=i}return!0}event(t,i,r){if(void 0===i&&(i={}),void 0===r&&(r={}),!t)return x.error("Missing event name"),!1;if(!this.__loaded)return this.push(["event",t,i,r]);this.sessionManager&&this.sessionManager.checkAndGetSessionAndWindowId(!1),this.STATE.sessionEngaged=!0,i&&i.hasOwnProperty("ignore_referrer")&&(this.STATE.ignoreReferrer=!0===i.ignore_referrer,delete i.ignore_referrer),i&&["page_referrer","page_location","page_title"].forEach((t=>{i.hasOwnProperty(t)&&(this.STATE.persistentParameters[t]=i[t])}));var s=this.CONFIG.attribution_ids;i&&i.send_to&&(s=Array.isArray(i.send_to)?i.send_to:[i.send_to],delete i.send_to);var n=s.filter((t=>this.STATE.initializedTargets.has(t)));0===n.length&&this.CONFIG.attribution_ids.length>0&&(n=[this.CONFIG.attribution_ids[0]]);var a=this.STATE.isFirstVisit,o=this.STATE.isNewVisit,h=this.At(t,i);return n.forEach((t=>{var i=e(e({},h),{},{attribution_id:t}),s={method:"POST",url:this.CONFIG.api_host+this.CONFIG.api_endpoint,data:i,compression:this.CONFIG.disable_compression?void 0:"gzip-js",batchKey:t};r&&r.transport&&(s.transport=r.transport),this.CONFIG.request_batching&&!r.send_instantly?this._requestQueue.enqueue(s):this.Pt(s)})),a&&(this.STATE.isFirstVisit=!1),o&&(this.STATE.isNewVisit=!1),this.sessionManager&&this.sessionManager.refreshSessionTimer(),!0}At(t,i){var s,n,a,c;void 0===i&&(i={});var l=e(e({},i),{},{[G]:t}),u={};this.CONFIG.cookieless&&!this.STATE.consentStatus.analytics||(u.client_id=this.STATE.clientId),u.session_id=this.STATE.sessionId,u.session_number=this.STATE.sessionNumber||1,u.session_engaged=this.STATE.sessionEngaged?1:0,u.event_time=Math.floor(Date.now()/1e3),Object.entries(u).forEach((t=>{var[i,e]=t;l.hasOwnProperty(i)||(l[i]=e)}));var f=(function(){if(!d)return{};var t,i,e,[s,n]=(function(t){for(var i=0;i<ui.length;i++){var[e,r]=ui[i],s=e.exec(t),n=s&&(_(r)?r(s,t):r);if(n)return n}return["",""]})(d);return R({lib:"web",lib_version:v,event_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),event_time:Date.now()/1e3,page_location:B(null==h?void 0:h.href,[],fi),page_hostname:null==h?void 0:h.host,page_path:null==h?void 0:h.pathname,os_name:s,os_version:n,browser:hi(d,navigator.vendor),device:di(d),device_type:(i=d,e=di(i),e===St||e===kt||"Kobo"===e||"Kindle Fire"===e||e===Zt?L:e===Lt||e===Wt||e===Ft||e===Vt?"Console":e===xt?"Wearable":e?J:"Desktop").toLowerCase(),timezone:gi(),timezone_offset:mi(),raw_user_agent:d.length>1e3?d.substring(0,997)+"...":d,browser_version:li(d,navigator.vendor),browser_language:vi(),browser_language_prefix:(t=vi(),"string"==typeof t?t.split("-")[0]:void 0),screen_resolution:(r&&r.screen.width)+"x"+(r&&r.screen.height),viewport_resolution:(r&&r.innerWidth)+"x"+(r&&r.innerHeight)})})();Object.entries(f).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)}));var p,g,m,y=o?(p=B(o.URL,[],fi),g=K.concat([]),m={},T(g,(function(t){var i=(function(t,i){for(var e,r=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),s=0;s<r.length;s++){var n=r[s].split("=");if(n[0]===i){e=n;break}}if(!b(e)||e.length<2)return"";var a=e[1];try{a=decodeURIComponent(a)}catch{x.error("Skipping decoding for malformed query param: "+a)}return a.replace(/\+/g," ")})(p,t);m[t]=i||null})),m):{};Object.entries(y).forEach((t=>{var[i,e]=t;e&&!l[i]&&(l[i]=e)})),this.STATE.userId&&(l.user_id=this.STATE.userId);var w=null===(s=this.userManager)||void 0===s?void 0:s.getUserData();w&&Object.keys(w).length>0&&Object.entries(w).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)}));var k=null===(n=this.clickIdManager)||void 0===n?void 0:n.getAttributionData();k&&Object.keys(k).length>0&&Object.entries(k).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)}));var S=null===(a=this.adBlockManager)||void 0===a?void 0:a.getAdBlockData();S&&Object.keys(S).length>0&&Object.entries(S).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)})),this.STATE.isNewVisit&&!l[X]&&(l[X]=1),this.STATE.isFirstVisit&&!l[H]&&(l[H]=1);var O=o&&(null===(c=o.location)||void 0===c?void 0:c.hostname)||"",E=pi(),j=this.STATE.ignoreReferrer;if(E&&"$direct"!==E&&(this.CONFIG.ignore_referrer_domains.includes(E)&&(j=!0),O&&O===E&&(j=!0)),j&&!l[$]&&(l[$]=!0),!j&&"$direct"!==E&&!l.page_referrer){var I={page_referrer:o&&o.referrer||"$direct",page_referring_domain:pi()};Object.entries(I).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)}))}return Object.entries(this.STATE.persistentParameters).forEach((t=>{var[i,e]=t;l[i]||(l[i]=e)})),l.consent_analytics||(l.consent_analytics=this.STATE.consentStatus.analytics),l.consent_advertising||(l.consent_advertising=this.STATE.consentStatus.advertising),l.consent_personalization||(l.consent_personalization=this.STATE.consentStatus.personalization),l}Nt(t){try{return new URL(t||"").hostname}catch(t){return""}}Pt(t){if(this._retryQueue){var i=t.callback;t.callback=t=>{if(!0===this.CONFIG.cookieless&&t.statusCode<300)try{var e=JSON.parse(t.text);if(e.client_id&&(this.Rt=e.client_id,this.STATE.consentStatus.analytics))if(this.clientManager&&"function"==typeof this.clientManager.setClientId)this.clientManager.setClientId(e.client_id);else if(this.STATE.clientId=e.client_id,this.persistence&&this.persistence_name){var r=this.persistence.parse(this.persistence_name)||{};r.client_id=e.client_id,this.persistence.set(this.persistence_name,r,this.CONFIG.cookie_expiration,this.CONFIG.cross_subdomain_cookie,this.CONFIG.secure_cookie)}}catch(t){x.error("Error processing server response:",t)}i&&i(t)},this._retryQueue.retriableRequest(t)}else this.R(t)}R(t){if(this.__loaded){if(t.headers=t.headers||{},"sendBeacon"===t.transport&&a&&a.sendBeacon)try{if(a.sendBeacon(t.url,new Blob([JSON.stringify(t.data)],{type:"text/plain"})))return;x.warn("sendBeacon failed, falling back to regular request")}catch(t){x.error("Error in sendBeacon, falling back to regular request:",t)}(t=>{var i,r,s,n=e({},t);n.timeout=n.timeout||6e4,n.url=Y(n.url,{_:""+(new Date).getTime(),ver:v,compression:n.compression});var a=null!==(i=n.transport)&&void 0!==i?i:"fetch",o=null!==(r=null===(s=D(it,(t=>t.transport===a)))||void 0===s?void 0:s.method)&&void 0!==r?r:it[0].method;if(!o)throw Error("No available transport method");o(n)})(e(e({},t),{},{callback:i=>{var e,r,s;i.statusCode>=400&&(x.error("Request error:",i.statusCode,i.text),null===(r=(s=this.CONFIG).on_request_error)||void 0===r||r.call(s,i)),null===(e=t.callback)||void 0===e||e.call(t,i)}}))}else x.warn("TrustData not initialized, cannot send request")}consent(t,i){if(!this.__loaded)return this.push(["consent",t,i]);if(!i||!i.hasOwnProperty("consent"))return x.error("Invalid consent parameters"),!1;var r=i.consent,s=e({},this.STATE.consentStatus);if("analytics"in r&&(this.STATE.consentStatus.analytics=!0===r.analytics||"granted"===r.analytics),"advertising"in r&&(this.STATE.consentStatus.advertising=!0===r.advertising||"granted"===r.advertising),"personalization"in r&&(this.STATE.consentStatus.personalization=!0===r.personalization||"granted"===r.personalization),this.consentManager instanceof bi&&(this.consentManager.optInOut(this.STATE.consentStatus.analytics),this.STATE.consentStatus.analytics&&this.CONFIG.request_batching&&this._requestQueue.enable(),!0===this.CONFIG.cookieless&&s.analytics!==this.STATE.consentStatus.analytics)){var n=this.STATE.clientId,a=this.STATE.userId;if(this.Dt(),this.STATE.consentStatus.analytics){var o=this.Rt||n;if(o||a){var h=this.persistence.parse(this.persistence_name)||{};o&&(h.client_id=o,this.STATE.clientId=o),a&&(h.user_id=a),this.persistence.set(this.persistence_name,h,this.CONFIG.cookie_expiration,this.CONFIG.cross_subdomain_cookie,this.CONFIG.secure_cookie)}}else if(n){var c=this.persistence.parse(this.persistence_name)||{};c.client_id=n,this.persistence.set(this.persistence_name,c)}}return!0}get(t,i,r){var s,n,a;if("string"==typeof t&&"function"==typeof i&&(r=i,i=t,t=null),!this.__loaded)return this.push(["get",t,i,r]);switch(i){case"client_id":a=this.STATE.clientId;break;case"user_id":a=this.STATE.userId;break;case"session_id":a=null===(s=this.sessionManager)||void 0===s?void 0:s.getSessionId();break;case"user_data":a=(null===(n=this.userManager)||void 0===n?void 0:n.getUserData())||{};break;case"consent_status":a=e({},this.STATE.consentStatus);break;case"debug_mode":a=this.CONFIG.debug;break;default:a=this.STATE.persistentParameters[i]}return"function"==typeof r&&r(a),a}push(t){this.__loaded?b(t)?this.Ct([t]):_(t)&&t.call(this):r.trustdata&&b(r.trustdata)&&r.trustdata.push(t)}}Ei.prototype.zt=function(){this.CONFIG.send_page_view&&this.__loaded&&this.event(F)},r.qt=r.qt||{},r.Mt=!1;var ji={};!(function(t,i){for(var e=0;e<5;e++)t.prototype[i[e]]=C(t.prototype[i[e]])})(Ei,["event","set","get","consent","push"]),(function(){var t=new Ei;ji[xi]=t;var i=r.trustdata;if(i&&b(i)){i.Jt&&b(i.Jt)&&T(i.Jt,(function(e){if(e&&b(e)){var r=e[2]||xi,s=t.config(e[0],e[1]||{},r);s&&r!==xi&&i[r]&&b(i[r])&&s.Ct(i[r])}}));for(var e=[],s=0;s<i.length;s++){var n=i[s];b(n)&&e.push(n)}e.length>0&&t.Ct(e)}r.trustdata=t,(function(){function t(){t.done||(t.done=!0,Object.values(ji).forEach((function(t){"function"==typeof t.zt&&t.zt()})))}o&&o.addEventListener?"complete"===o.readyState?t():o.addEventListener("DOMContentLoaded",t,{capture:!1,passive:!0}):r&&x.error("Browser doesn't support `document.addEventListener` so TrustData couldn't be initialized")})()})()})();
