!(function(){"use strict";function t(t,i,e){return(i=(function(t){var i=(function(t){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var e=i.call(t,"string");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return t+""})(t);return"symbol"==typeof i?i:i+""})(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function i(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,r)}return e}function e(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?i(Object(s),!0).forEach((function(i){t(e,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var r="undefined"!=typeof window?window:void 0,s="undefined"!=typeof globalThis?globalThis:r,n=Array.prototype.forEach,a=null==s?void 0:s.navigator,o=null==s?void 0:s.document,h=null==s?void 0:s.location,u=null==s?void 0:s.fetch,c=null!=s&&s.XMLHttpRequest&&"withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:void 0,l=null==s?void 0:s.AbortController,d=null==a?void 0:a.userAgent,v=null!=r?r:{},f="1.0.0",g=Object.prototype,p=g.hasOwnProperty,_=g.toString,m=Array.isArray||function(t){return"[object Array]"===_.call(t)},b=t=>"function"==typeof t,y=t=>void 0===t,S=t=>"[object String]"==_.call(t),w=t=>null===t,O=t=>"[object Number]"==_.call(t),x=t=>{var i={t:function(t){},info:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.t("log",...e)},warn:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.t("warn",...e)},error:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];i.t("error",...e)},critical:function(){for(var t=arguments.length,i=Array(t),e=0;e<t;e++)i[e]=arguments[e]},uninitializedWarning:t=>{i.error("You must initialize TrustData before calling ".concat(t))},createLogger:i=>x("".concat(t," ").concat(i))};return i},E=x("[TrustData.js]"),k=E.createLogger,T={};function R(t,i,e){if(m(t))if(n&&t.forEach===n)t.forEach(i,e);else if("length"in t&&t.length===+t.length)for(var r=0,s=t.length;r<s;r++)if(r in t&&i.call(e,t[r],r)===T)return}function I(t,i,e){if(!y(r=t)&&!w(r)){var r;if(m(t))return R(t,i,e);if((t=>t instanceof FormData)(t)){for(var s of t.entries())if(i.call(e,s[1],s[0])===T)return}else for(var n in t)if(p.call(t,n)&&i.call(e,t[n],n)===T)return}}var j=function(t){for(var i=arguments.length,e=Array(i>1?i-1:0),r=1;r<i;r++)e[r-1]=arguments[r];return R(e,(function(i){for(var e in i)void 0!==i[e]&&(t[e]=i[e])})),t},M=function(t){return function(){try{for(var i=arguments.length,e=Array(i),r=0;r<i;r++)e[r]=arguments[r];return t.apply(this,e)}catch(t){E.critical("Implementation error. Please turn on debug mode"),E.critical(t)}}};function P(t,i){for(var e=0;e<t.length;e++)if(i(t[e]))return t[e]}function C(t,i,e,r){var{capture:s=!1,passive:n=!0}={};null==t||t.addEventListener(i,e,{capture:s,passive:n})}var D=function(t,i,e){if(!t||!i||!i.length)return t;for(var r=t.split("#"),s=r[1],n=(r[0]||"").split("?"),a=n[1],o=n[0],h=(a||"").split("&"),u=[],c=0;c<h.length;c++){var l=h[c].split("=");m(l)&&(i.includes(l[0])?u.push(l[0]+"="+e):u.push(h[c]))}var d=o;return null!=a&&(d+="?"+u.join("&")),null!=s&&(d+="#"+s),d},N="cid",B="uid",U="udata",z="primary_window",A="fv",q=3e3,J="Mobile",F="Tablet",W="page_view",L="page_leave",G="event_name",K="client_id",X="session_id",H="event_time",V="session_number",$="session_engaged",Q="first_visit",Y="entrances",Z="ignore_referrer",tt=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","trdt_cpid","trdt_agid","trdt_kwid","trdt_ctid","mc_cid","gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],it=!!c||!!u,et=(t,i)=>{var[r,s]=t.split("?"),n=e({},i);null==s||s.split("&").forEach((t=>{var[i]=t.split("=");delete n[i]}));var a=(function(t,i){var e;void 0===i&&(i="&");var r=[];return I(t,(function(t,i){y(t)||y(i)||"undefined"===i||(e=encodeURIComponent(t instanceof File?t.name:""+t),r[r.length]=encodeURIComponent(i)+"="+e)})),r.join(i)})(n);return a=a?(s?s+"&":"")+a:s,"".concat(r,"?").concat(a)},rt=(t,i)=>JSON.stringify(t,((t,i)=>"bigint"==typeof i?""+i:i),i),st=t=>{var{data:i,compression:e}=t;if(i){if("base64"===e){var r=(function(t){var i,e,r,s,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,o=0,h="",u=[];if(!t)return t;t=(function(t){var i,e,r,s,n="";for(i=e=0,r=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,s=0;s<r;s++){var a=t.charCodeAt(s),o=null;a<128?e++:o=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),w(o)||(e>i&&(n+=t.substring(i,e)),n+=o,i=e=s+1)}return e>i&&(n+=t.substring(i,t.length)),n})(t);do{i=(s=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>12&63,e=s>>6&63,r=63&s,u[o++]=n.charAt(s>>18&63)+n.charAt(i)+n.charAt(e)+n.charAt(r)}while(a<t.length);switch(h=u.join(""),t.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h})(rt(i)),s=(t=>"data="+encodeURIComponent("string"==typeof t?t:rt(t)))(r);return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var n=rt(i);return{contentType:"application/json",body:n,estimatedSize:new Blob([n]).size}}},nt=[];function at(t,i,e,r,s){return O(t)?t>e?(E.warn(r+" cannot be greater than max: "+e+". Using max value instead."),e):t<i?(E.warn(r+" cannot be less than min: "+i+". Using min value instead."),i):t:(E.warn(r+" must be a number. using max or fallback. max: "+e+", fallback: "+s),at(s||e,i,e,r))}u&&nt.push({transport:"fetch",method:t=>{var i,r,{contentType:s,body:n,estimatedSize:a}=null!==(i=st(t))&&void 0!==i?i:{},o=new Headers;I(t.headers,(function(t,i){o.append(i,t)})),s&&o.append("Content-Type",s);var h=t.url,c=null;if(l){var d=new l;c={signal:d.signal,timeout:setTimeout((()=>d.abort()),t.timeout)}}u(h,e({method:(null==t?void 0:t.method)||"GET",headers:o,keepalive:"POST"===t.method&&(a||0)<52428.8,body:n,signal:null===(r=c)||void 0===r?void 0:r.signal},t.fetchOptions)).then((i=>i.text().then((e=>{var r,s={statusCode:i.status,text:e};if(200===i.status)try{s.json=JSON.parse(e)}catch(t){E.error(t)}null===(r=t.callback)||void 0===r||r.call(t,s)})))).catch((i=>{var e;E.error(i),null===(e=t.callback)||void 0===e||e.call(t,{statusCode:0,text:i})})).finally((()=>c?clearTimeout(c.timeout):null))}}),c&&nt.push({transport:"XHR",method:t=>{var i,e=new c;e.open(t.method||"GET",t.url,!0);var{contentType:r,body:s}=null!==(i=st(t))&&void 0!==i?i:{};I(t.headers,(function(t,i){e.setRequestHeader(i,t)})),r&&e.setRequestHeader("Content-Type",r),t.timeout&&(e.timeout=t.timeout),e.withCredentials=!0,e.onreadystatechange=()=>{if(4===e.readyState){var i,r={statusCode:e.status,text:e.responseText};if(200===e.status)try{r.json=JSON.parse(e.responseText)}catch{}null===(i=t.callback)||void 0===i||i.call(t,r)}},e.send(s)}}),null!=a&&a.sendBeacon&&nt.push({transport:"sendBeacon",method:t=>{var i=et(t.url,{beacon:"1"});try{var e,{contentType:r,body:s}=null!==(e=st(t))&&void 0!==e?e:{},n="string"==typeof s?new Blob([s],{type:r}):s;a.sendBeacon(i,n)}catch{}}});class ot{constructor(t,i){this.i=!0,this.o=[],this.h=void 0,this.u=at((null==i?void 0:i.flush_interval_ms)||q,250,5e3,"flush interval",q),this.l=t}enqueue(t){this.o.push(t),this.h||this.v()}unload(){this.p();var t=this.o.length>0?this.m():{},i=Object.values(t);[...i.filter((t=>0===t.url.indexOf("/e"))),...i.filter((t=>0!==t.url.indexOf("/e")))].map((t=>{this.l(e(e({},t),{},{transport:"sendBeacon"}))}))}enable(){this.i=!1,this.v()}v(){var t=this;this.i||(this.h=setTimeout((()=>{if(this.p(),this.o.length>0){var i=this.m(),e=function(){var e=i[r],s=(new Date).getTime();e.data&&m(e.data)&&I(e.data,(t=>{t.offset=Math.abs(t.timestamp-s),delete t.timestamp})),t.l(e)};for(var r in i)e()}}),this.u))}p(){clearTimeout(this.h),this.h=void 0}m(){var t={};return I(this.o,(i=>{var r,s=i,n=(s?s.batchKey:null)||s.url;y(t[n])&&(t[n]=e(e({},s),{},{data:[]})),null===(r=t[n].data)||void 0===r||r.push(s.data)})),this.o=[],t}}var ht=["retriesPerformedSoFar"];class ut{constructor(t){this.S=t,this.O=!1,this.k=void 0,this.T=3e3,this.o=[],this.R=!0,!y(r)&&"onLine"in r.navigator&&(this.R=r.navigator.onLine,C(r,"online",(()=>{this.R=!0,this.I()})),C(r,"offline",(()=>{this.R=!1})))}get length(){return this.o.length}retriableRequest(t){var{retriesPerformedSoFar:i}=t,r=(function(t,i){if(null==t)return{};var e,r,s=(function(t,i){if(null==t)return{};var e={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==i.indexOf(r))continue;e[r]=t[r]}return e})(t,i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(r=0;r<n.length;r++)-1===i.indexOf(e=n[r])&&{}.propertyIsEnumerable.call(t,e)&&(s[e]=t[e])}return s})(t,ht);O(i)&&i>0&&(r.url=et(r.url,{retry_count:i})),this.S.j(e(e({},r),{},{callback:t=>{var s;200!==t.statusCode&&(t.statusCode<400||t.statusCode>=500)&&(null!=i?i:0)<10?this.M(e({retriesPerformedSoFar:i},r)):null===(s=r.callback)||void 0===s||s.call(r,t)}}))}M(t){var i=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=i+1;var e=(function(t){var i=3e3*2**t,e=i/2,r=Math.min(18e5,i),s=Math.random()-.5;return Math.ceil(r+s*(r-e))})(i),r=Date.now()+e;this.o.push({retryAt:r,requestOptions:t});var s="Enqueued failed request for retry in ".concat(e);navigator.onLine||(s+=" (Browser is offline)"),E.warn(s),this.O||(this.O=!0,this.P())}P(){this.k&&clearTimeout(this.k),this.k=setTimeout((()=>{this.R&&this.o.length>0&&this.I(),this.P()}),this.T)}I(){var t=Date.now(),i=[],e=this.o.filter((e=>e.retryAt<t||(i.push(e),!1)));if(this.o=i,e.length>0)for(var{requestOptions:r}of e)this.retriableRequest(r)}unload(){for(var{requestOptions:t}of(this.k&&(clearTimeout(this.k),this.k=void 0),this.o))try{this.S.j(e(e({},t),{},{transport:"sendBeacon"}))}catch(t){E.error(t)}this.o=[]}}function ct(){return Date.now().toString(36)+Math.random().toString(36).substring(2,9)}function lt(){return Math.floor(Date.now()/1e3)}var dt="",vt=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,ft={is_supported:()=>!!o,error:function(t){E.error("cookieStore error: "+t)},get:function(t){if(o){try{for(var i=t+"=",e=o.cookie.split(";").filter((t=>t.length)),r=0;r<e.length;r++){for(var s=e[r];" "==s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(i))return decodeURIComponent(s.substring(i.length,s.length))}}catch{}return null}},parse:function(t){var i;try{i=JSON.parse(ft.get(t))||{}}catch{}return i},set:function(t,i,e,r,s){if(o)try{var n="",a="",h=(function(t,i){if(i){var e=(function(t,i){if(void 0===i&&(i=o),dt)return dt;if(!i)return"";if(["localhost","127.0.0.1"].includes(t))return"";for(var e=t.split("."),r=Math.min(e.length,8),s="dmn_chk_"+ct(),n=RegExp("(^|;)\\s*"+s+"=1");!dt&&r--;){var a=e.slice(r).join("."),h=s+"=1;domain=."+a;i.cookie=h,n.test(i.cookie)&&(i.cookie=h+";expires=Thu, 01 Jan 1970 00:00:00 GMT",dt=a)}return dt})(t);if(!e){var r=(t=>{var i=t.match(vt);return i?i[0]:""})(t);e=r}return e?"; domain=."+e:""}return""})(o.location.hostname,r);if(e){var u=new Date;u.setTime(u.getTime()+24*e*60*60*1e3),n="; expires="+u.toUTCString()}s&&(a="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(i))+n+"; SameSite=Lax; path=/"+h+a;return c.length>3686.4&&E.warn("cookieStore warning: large cookie, len="+c.length),o.cookie=c,c}catch{return}},remove:function(t,i){try{ft.set(t,"",-1,i)}catch{return}}},gt=null,pt={is_supported:function(){if(!w(gt))return gt;var t=!0;if(y(r))t=!1;else try{var i="__mplssupport__";pt.set(i,"xyz"),'"xyz"'!==pt.get(i)&&(t=!1),pt.remove(i)}catch{t=!1}return t||E.error("localStorage unsupported; falling back to cookie store"),gt=t,t},error:function(t){E.error("localStorage error: "+t)},get:function(t){try{return r&&r.localStorage.getItem(t)}catch(t){pt.error(t)}return null},parse:function(t){try{return JSON.parse(pt.get(t))||{}}catch{}return null},set:function(t,i){try{r&&r.localStorage.setItem(t,JSON.stringify(i))}catch(t){pt.error(t)}},remove:function(t){try{r&&r.localStorage.removeItem(t)}catch(t){pt.error(t)}}},_t=[N,B,U,"sid","sn","last","start","wid",z,A],mt=e(e({},pt),{},{parse:function(t){try{var i={};try{i=ft.parse(t)||{}}catch{}var e=j(i,JSON.parse(pt.get(t)||"{}"));return pt.set(t,e),e}catch{}return null},set:function(t,i,e,r,s,n){try{pt.set(t,i,void 0,void 0,n);var a={};_t.forEach((t=>{i[t]&&(a[t]=i[t])})),Object.keys(a).length&&ft.set(t,a,e,r,s,n)}catch(t){pt.error(t)}},remove:function(t,i){try{r&&r.localStorage.removeItem(t),ft.remove(t,i)}catch(t){pt.error(t)}}}),bt={},yt={is_supported:function(){return!0},error:function(t){E.error("memoryStorage error: "+t)},get:function(t){return bt[t]||null},parse:function(t){return bt[t]||null},set:function(t,i){bt[t]=i},remove:function(t){delete bt[t]}};function St(t,i){return-1!==t.indexOf(i)}var wt=J,Ot="iOS",xt="Android",Et=F,kt=xt,Tt="iPad",Rt="Apple",It=Rt+" Watch",jt="Safari",Mt="BlackBerry",Pt="Samsung",Ct=Pt+"Browser",Dt=Pt+" Internet",Nt="Chrome",Bt=Nt+" OS",Ut=Nt+" "+Ot,zt="Internet Explorer",At=zt,qt="Opera",Jt=qt+" Mini",Ft="Edge",Wt="Edge",Lt="Firefox",Gt=Lt+" "+Ot,Kt="Nintendo",Xt="PlayStation",Ht="Xbox",Vt=xt,$t=jt,Qt="Windows",Yt=Qt+" Phone",Zt="Nokia",ti="Ouya",ii="Generic",ei=ii+" "+wt.toLowerCase(),ri=ii+" "+Et.toLowerCase(),si="Konqueror",ni="(\\d+(\\.\\d+)?)",ai=RegExp("Version/"+ni),oi=RegExp(Ht,"i"),hi=RegExp(Xt+" \\w+","i"),ui=RegExp(Kt+" \\w+","i"),ci=RegExp(Mt+"|PlayBook|BB10","i"),li={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},di=function(t,i){return i=i||"",St(t," OPR/")&&St(t,"Mini")?Jt:St(t," OPR/")?qt:ci.test(t)?Mt:St(t,"IE"+wt)||St(t,"WPDesktop")?At:St(t,Ct)?Dt:St(t,Ft)||St(t,"Edg/")?Wt:St(t,"FBIOS")?"Facebook "+wt:St(t,"UCWEB")||St(t,"UCBrowser")?"UC Browser":St(t,"CriOS")?Ut:St(t,"CrMo")||St(t,Nt)?Nt:St(t,xt)&&St(t,jt)?Vt:St(t,"FxiOS")?Gt:St(t.toLowerCase(),"konqueror")?si:((t,i)=>i&&St(i,Rt)||(function(t){return St(t,jt)&&!St(t,Nt)&&!St(t,xt)})(t))(t,i)?St(t,wt)?$t:jt:St(t,Lt)?Lt:St(t,"MSIE")||St(t,"Trident/")?zt:St(t,"Gecko")?Lt:""},vi={[At]:[RegExp("rv:"+ni)],[Wt]:[RegExp(Ft+"?\\/"+ni)],[Nt]:[RegExp("("+Nt+"|CrMo)\\/"+ni)],[Ut]:[RegExp("CriOS\\/"+ni)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+ni)],[jt]:[ai],[$t]:[ai],[qt]:[RegExp("(Opera|OPR)\\/"+ni)],[Lt]:[RegExp(Lt+"\\/"+ni)],[Gt]:[RegExp("FxiOS\\/"+ni)],[si]:[RegExp("Konqueror[:/]?"+ni,"i")],[Mt]:[RegExp(Mt+" "+ni),ai],[Vt]:[RegExp("android\\s"+ni,"i")],[Dt]:[RegExp(Ct+"\\/"+ni)],[zt]:[RegExp("(rv:|MSIE )"+ni)],Mozilla:[RegExp("rv:"+ni)]},fi=function(t,i){var e=di(t,i),r=vi[e];if(y(r))return null;for(var s=0;s<r.length;s++){var n=t.match(r[s]);if(n)return parseFloat(n[n.length-2])}return null},gi=[[RegExp(Ht+"; "+Ht+" (.*?)[);]","i"),t=>[Ht,t&&t[1]||""]],[RegExp(Kt,"i"),[Kt,""]],[RegExp(Xt,"i"),[Xt,""]],[ci,[Mt,""]],[RegExp(Qt,"i"),(t,i)=>{if(/Phone/.test(i)||/WPDesktop/.test(i))return[Yt,""];if(RegExp(wt).test(i)&&!/IEMobile\b/.test(i))return[Qt+" "+wt,""];var e=/Windows NT ([0-9.]+)/i.exec(i);if(e&&e[1]){var r=li[e[1]]||"";return/arm/i.test(i)&&(r="RT"),[Qt,r]}return[Qt,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>t&&t[3]?[Ot,[t[3],t[4],t[5]||"0"].join(".")]:[Ot,""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var i="";return t&&t.length>=3&&(i=y(t[2])?t[3]:t[2]),["watchOS",i]}],[RegExp("("+xt+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+xt+")","i"),t=>t&&t[2]?[xt,[t[2],t[3],t[4]||"0"].join(".")]:[xt,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var i=["Mac OS X",""];return t&&t[1]&&(i[1]=[t[1],t[2],t[3]||"0"].join(".")),i}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Bt,""]],[/Linux|debian/i,["Linux",""]]],pi=function(t){return ui.test(t)?Kt:hi.test(t)?Xt:oi.test(t)?Ht:RegExp(ti,"i").test(t)?ti:RegExp("("+Yt+"|WPDesktop)","i").test(t)?Yt:/iPad/.test(t)?Tt:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?It:ci.test(t)?Mt:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":RegExp(Zt,"i").test(t)?Zt:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!RegExp(wt).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?xt:kt:xt:RegExp("(pda|"+wt+")","i").test(t)?ei:RegExp(Et,"i").test(t)&&!RegExp(Et+" pc","i").test(t)?ri:""},_i="<masked>";function mi(){return navigator.language||navigator.userLanguage}function bi(){var t;return!o&&o.referrer?"$direct":(null===(t=(t=>{var i=o&&o.createElement("a");return y(i)?null:(i.href=t,i)})(o.referrer))||void 0===t?void 0:t.host)||"$direct"}function yi(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function Si(){try{return(new Date).getTimezoneOffset()}catch{return}}class wi{constructor(t){this._config=t.CONFIG,this.C=void 0,this.D=t.STATE}get consent(){return this.N()?0:this.B}isOptedOut(){return 0===this.consent||-1===this.consent&&this._config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(t){this.U.set(this.A,t?1:0,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),this.D&&(this.D.consentStatus=e(e({},this.D.consentStatus),{},{analytics:t}))}reset(){this.U.remove(this.A,this._config.cross_subdomain_cookie)}get A(){var{attribution_ids:t,opt_out_capturing_cookie_prefix:i}=this._config;return(i||"__tr_opt_in_out_")+t[0]}get B(){var t=this.U.get(this.A);return"1"===t?1:"0"===t?0:-1}get U(){if(!this.C){var t=this._config.opt_out_capturing_persistence_type;this.C="localStorage"===t?pt:ft;var i="localStorage"===t?ft:pt;i.get(this.A)&&(this.C.get(this.A)||this.optInOut("1"===i.get(this.A)),i.remove(this.A,this._config.cross_subdomain_cookie))}return this.C}N(){return!!this._config.respect_dnt&&!!P([null==a?void 0:a.doNotTrack,null==a?void 0:a.msDoNotTrack,v.doNotTrack],(t=>St([!0,1,"1","yes"],t)))}}class Oi{constructor(t){this.logger=k("[SessionManager]"),this._config=t.CONFIG,this.D=t.STATE,this.q=t.consentManager,this.J=t.persistence;var i=this._config.persistence_name||"_trdt";this.SESSION_DATA_KEY=i+"_sdata",this.SESSION_NUMBER_KEY=i+"_sn",this.WINDOW_ID_KEY=i+"_wid",this.PRIMARY_WINDOW_KEY=i+"_"+z,this._sessionId=null,this._sessionActivityTimestamp=null,this._sessionStartTimestamp=null,this.F=null,this.windowId=null,this.sessionChangeHandlers=[],this.sessionTimer=null,this.W(),this.initSession(!0)}L(){return 60*Math.min(Math.max(this._config.sessionTimeout||30,1),600)*1e3}G(){var t=this.q.isOptedIn()&&!this._config.disable_persistence&&this.J;return this.q.isOptedIn(),t}K(){try{return"undefined"!=typeof sessionStorage&&null!==sessionStorage}catch(t){return E.error("Error accessing sessionStorage:",t),!1}}X(){if(this.windowId)return this.windowId;if(this.K())try{var t=sessionStorage.getItem(this.WINDOW_ID_KEY);if(t)return t}catch(t){E.error("Error reading window ID from sessionStorage:",t)}return null}H(t){if(t!==this.windowId&&(this.windowId=t,this.K()))try{sessionStorage.setItem(this.WINDOW_ID_KEY,t)}catch(t){E.error("Error storing window ID in sessionStorage:",t)}}W(){if(this.K())try{var t=sessionStorage.getItem(this.WINDOW_ID_KEY),i=sessionStorage.getItem(this.PRIMARY_WINDOW_KEY);t&&!i?this.windowId=t:sessionStorage.removeItem(this.WINDOW_ID_KEY),sessionStorage.setItem(this.PRIMARY_WINDOW_KEY,"true"),window.addEventListener("beforeunload",(()=>{sessionStorage.removeItem(this.PRIMARY_WINDOW_KEY)}))}catch(t){E.error("Error initializing window tracking:",t)}}V(t,i,e){if((t!==this._sessionId||i!==this._sessionActivityTimestamp||e!==this._sessionStartTimestamp)&&(this._sessionId=t,this._sessionActivityTimestamp=i,this._sessionStartTimestamp=e,this.G()))try{var r=[i,t,e];if(!this.J||"function"!=typeof this.J.set)return void E.error("Persistence layer is not properly initialized");this.J.set(this.SESSION_DATA_KEY,JSON.stringify(r),this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),this.J.get(this.SESSION_DATA_KEY)}catch(t){E.error("Error storing session data:",t)}}$(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];if(this.G())try{var t=this.J.get(this.SESSION_DATA_KEY);if(t){var i;try{i=JSON.parse(JSON.parse(t))}catch(e){try{i=JSON.parse(t)}catch(i){return E.error("Unable to parse session data:",t,i),[0,null,0]}}if(Array.isArray(i))return 2===i.length&&i.push(i[0]),this._sessionActivityTimestamp=i[0],this._sessionId=i[1],this._sessionStartTimestamp=i[2],i;E.error("Stored session data is not an array:",i)}}catch(t){E.error("Error reading session data:",t)}return[0,null,0]}Y(){if(this.F)return this.F;if(this.G())try{var t=this.J.get(this.SESSION_NUMBER_KEY);if(t){var i=parseInt(t)||1;return this.F=i,i}}catch(t){E.error("Error reading session number:",t)}return 1}Z(t){if(this.F=t,this.G())try{this.J.set(this.SESSION_NUMBER_KEY,""+t,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),this.J.get(this.SESSION_NUMBER_KEY)}catch(t){E.error("Error storing session number:",t)}}tt(t,i){return t>0&&i-t>864e5}checkAndGetSessionAndWindowId(t,i){void 0===t&&(t=!1),void 0===i&&(i=null);var e=i||(new Date).getTime();if(this.G()){var r=this.J.get(this.SESSION_DATA_KEY);try{r&&JSON.parse(r)}catch(t){E.error("Error parsing raw session data:",t)}}var[s,n,a]=this.$(),o=this.X(),h=this.Y(),u=a>0&&e-a>864e5,c=!1,l=!n,d=!t&&s>0&&e-s>this.L();this.L(),l||d||u?(n=lt(),o=ct(),a=e,h++,this.Z(h),c=!0):o||(o=ct(),c=!0);var v=0===s||!t||u?e:s,f=0===a?e:a;return this.H(o),this.V(n,v,f),this.D?(this.D.sessionId=n,this.D.sessionNumber=h,this.D.sessionEngaged=!c,this.D.isNewVisit=c):E.error("State object is not available"),t||this.refreshSessionTimer(),c&&this.it(n,o,c?{noSessionId:l,activityTimeout:d,sessionPastMaximumLength:u}:void 0),{sessionId:n,windowId:o,sessionStartTimestamp:f,sessionNumber:h,changeReason:c?{noSessionId:l,activityTimeout:d,sessionPastMaximumLength:u}:void 0,lastActivityTimestamp:v}}initSession(t){return void 0===t&&(t=!1),this.checkAndGetSessionAndWindowId(t)}refreshSessionTimer(){clearTimeout(this.sessionTimer);var t=1.1*this.L();this.sessionTimer=setTimeout((()=>{this.resetSession()}),t)}resetSession(){this.V(null,0,0),this.initSession()}onSessionChange(t){return this.sessionChangeHandlers.push(t),this._sessionId&&t(this._sessionId,this.windowId),()=>{this.sessionChangeHandlers=this.sessionChangeHandlers.filter((i=>i!==t))}}it(t,i,e){this.sessionChangeHandlers.forEach((r=>{try{r(t,i,e)}catch(t){E.error("Error in session change handler:",t)}}))}getSessionId(){return this._sessionId||this.D&&this.D.sessionId||null}getWindowId(){return this.X()}}class xi{constructor(t){this._config=t.CONFIG,this.D=t.STATE,this.J=t.persistence,this.q=t.consentManager,this.clientId=null,this.isFirstVisit=!1}initClientId(t){void 0===t&&(t={});var i=this.G(),e=this._config.persistence_name||"_trdt",r=t.client_id;if(!r&&i&&(r=this.J.get(e+"_"+N))&&r.startsWith('"')&&r.endsWith('"'))try{r=JSON.parse(r)}catch(t){E.error("Error parsing stored client ID",t)}var s=i&&this.J.get(e+"_"+A);return r?(this.clientId=r,this.isFirstVisit=!s):(this.clientId=Math.floor(2147483647*Math.random())+"."+lt(),this.isFirstVisit=!0,i&&(this.et(this.clientId),this.rt())),this.D.clientId=this.clientId,this.D.isFirstVisit=this.isFirstVisit,this.clientId}et(t){if(this.G()){var i=this._config.persistence_name||"_trdt",e=this._config.cookie_expiration,r=this._config.cross_subdomain_cookie,s=this._config.secure_cookie,n=t&&"string"==typeof t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t;this.J.set(i+"_"+N,n,e,r,s)}}rt(){if(this.G()&&this.isFirstVisit){var t=this._config.persistence_name||"_trdt",i=this._config.cookie_expiration,e=this._config.cross_subdomain_cookie,r=this._config.secure_cookie,s=""+Date.now();this.J.set(t+"_"+A,s,i,e,r)}}setClientId(t){if(!t)return!1;var i=t&&"string"==typeof t&&t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t;return this.clientId=i,this.D.clientId=i,this.G()&&this.et(i),!0}getClientId(){return this.clientId}G(){return this.q.isOptedIn()&&!this._config.disable_persistence}}class Ei{constructor(t){this._config=t.CONFIG,this.D=t.STATE,this.J=t.persistence,this.q=t.consentManager,this.userId=null,this.userData={},this.identifiers={}}initUser(t){void 0===t&&(t={});var i=this.G(),e=this._config.persistence_name||"_trdt";if(this.userId=t.user_id||i&&this.J.get(e+"_"+B),i)try{var r=this.J.get(e+"_"+U);r&&(this.userData=JSON.parse(r))}catch(t){E.error("Error parsing stored user data",t),this.userData={}}return this.D.userId=this.userId,this.userData}setUserId(t){return!!t&&(this.userId=t,this.D.userId=t,this.G()&&this.J.set((this._config.persistence_name||"_trdt")+"_"+B,t,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie),!0)}setUserData(t){if((i=t)!==Object(i)||m(i))return!1;var i;if(this.userData=e(e({},this.userData),t),this.G()){var r=this._config.cookie_expiration,s=this._config.cross_subdomain_cookie,n=this._config.secure_cookie;this.J.set((this._config.persistence_name||"_trdt")+"_"+U,JSON.stringify(this.userData),r,s,n)}return!0}setIdentifier(t,i){return!(!S(t)||!S(i)||(this.identifiers[t]=i,0))}getUserData(){return e(e({},this.userData),this.identifiers)}getUserId(){return this.userId}G(){return this.q.isOptedIn()&&!this._config.disable_persistence}}var ki=()=>{},Ti="trustdata";!it&&-1===(null==d?void 0:d.indexOf("MSIE"))&&(null==d||d.indexOf("Mozilla"));class Ri{__loaded=!1;CONFIG=(()=>{var t;return{api_host:"https://t.trstdata.com",api_endpoint:"/api/events",attribution_ids:[],ignore_referrer_domains:[],cross_subdomain_cookie:!0,persistence:"localStorage+cookie",persistence_name:"_trdt",cookieless:!1,debug:!1,loaded:ki,cookie_expiration:365,disable_persistence:!1,disable_compression:!0,secure_cookie:r&&"https:"===(null===(t=r.location)||void 0===t?void 0:t.protocol),request_batching:!0,properties_string_max_length:65535,session_timeout:30,on_request_error:t=>{E.error("Bad HTTP status: "+t.statusCode+" "+t.text)},send_page_view:!0,onCapture:ki,flush_interval_ms:q}})();constructor(){this.STATE={clientId:null,userId:null,sessionId:null,sessionNumber:1,sessionEngaged:!1,isNewVisit:!1,isFirstVisit:!1,ignoreReferrer:!1,consentStatus:{analytics:!1,advertising:!1,personalization:!1},persistentParameters:{},initializedTargets:new Set},this.logger=k("[TrustData.js]"),this.consentManager=new wi(this)}config(t,i,e){var r;if(void 0===i&&(i={}),void 0===e&&(e=null),!e||e===Ti)return this._config(t,i,e);var s=null!==(r=Ii[e])&&void 0!==r?r:new Ri;return s._config(t,i,e),Ii[e]=s,Ii[Ti][e]=s,s}st(t){if(m(t)){var i=[],e=[],r=[];I(t,(t=>{if(t){var s=t[0];m(s)?r.push(t):b(t)?t.call(this):m(t)&&"config"===s?i.push(t):m(t)&&-1!==s.indexOf("event")&&b(this[s])?r.push(t):e.push(t)}}));var s=t=>{I(t,(t=>{if(m(t[0])){var i=this;I(t,(t=>{i=i[t[0]].apply(i,t.slice(1))}))}else"function"==typeof this[t[0]]?this[t[0]].apply(this,t.slice(1)):E.warn("Unknown command:",t[0])}))};s(i),s(e),s(r)}}_config(t,i,e){return void 0===i&&(i={}),this.__loaded?(E.warn("You have already initialized TrustData! Re-initializing is a no-op"),this):(t&&!this.CONFIG.attribution_ids.includes(t)&&this.CONFIG.attribution_ids.push(t),t?(i.ignoreReferrerDomains&&(this.CONFIG.ignore_referrer_domains=Array.isArray(i.ignoreReferrerDomains)?i.ignoreReferrerDomains:[i.ignoreReferrerDomains]),Object.keys(i).forEach((t=>{t in this.CONFIG&&(this.CONFIG[t]=i[t])})),i.consent&&this.consent("update",{consent:i.consent}),this.nt(),this._requestQueue=new ot((t=>this.ot(t)),{flush_interval_ms:this.CONFIG.flush_interval_ms}),this._retryQueue=new ut(this),this.clientManager=new xi(this),this.userManager=new Ei(this),this.clientManager.initClientId(i),this.userManager.initUser(i),this.sessionManager=new Oi(this),this.__loaded=!0,this.consentManager.isOptedIn()&&this.CONFIG.request_batching&&this._requestQueue.enable(),this.ht(),r.ut=!0,t&&this.STATE.initializedTargets.add(t),!1!==i.send_page_view&&setTimeout((()=>this.event(W,{send_to:t})),50),"function"==typeof this.CONFIG.loaded&&this.CONFIG.loaded(this),!0):(E.critical("TrustData was initialized without a target ID. This likely indicates a misconfiguration."),this))}nt(){var t=this.CONFIG,i=t.persistence;!0!==t.cookieless||this.STATE.consentStatus.analytics||(i="memory"),this.persistence="localStorage"===i?pt:"cookie"===i?ft:"memory"===i?yt:mt,this.sessionPersistence="sessionStorage"===this.CONFIG.persistence?this.persistence:e(e({},this.persistence),{},{persistence:"sessionStorage"}),this.persistence_name=t.persistence_name||"_trdt"}ht(){var t="onpagehide"in self?"pagehide":"unload";r.addEventListener(t,this.ct.bind(this),{passive:!1})}ct(){this.CONFIG.request_batching?(this.event(L),this._requestQueue.unload(),this._retryQueue.unload()):this.event(L,null,{transport:"sendBeacon"})}set(t,i){if(!this.__loaded)return this.push(["set",t,i]);if("object"==typeof t)return Object.entries(t).forEach((t=>{var[i,e]=t;return this.set(i,e)})),!0;if("function"==typeof i)try{i=i()}catch(t){return E.error("Error processing function value:",t),!1}switch("string"==typeof i&&(i=i.substring(0,100)),t){case"user_id":this.STATE.userId=i,this.userManager.setUserId(i);break;case"client_id":this.clientManager.setClientId(i);break;case"debug_mode":this.CONFIG.debug=!0===i||"true"===i;break;case"page_referrer":case"page_location":case"page_title":this.STATE.persistentParameters[t]=i,"ignore_referrer"===t&&(this.STATE.ignoreReferrer=!0===i||"true"===i);break;case"user_data":"object"==typeof i&&this.userManager.setUserData(i);break;case"email_hash":case"phone_hash":this.userManager.setIdentifier(t,i);break;default:this.STATE.persistentParameters[t]=i}return!0}event(t,i,r){if(void 0===i&&(i={}),void 0===r&&(r={}),!t)return E.error("Missing event name"),!1;if(!this.__loaded)return this.push(["event",t,i,r]);this.STATE.sessionEngaged=!0,i&&i.hasOwnProperty("ignore_referrer")&&(this.STATE.ignoreReferrer=!0===i.ignore_referrer,delete i.ignore_referrer),i&&["page_referrer","page_location","page_title"].forEach((t=>{i.hasOwnProperty(t)&&(this.STATE.persistentParameters[t]=i[t])}));var s=this.CONFIG.attribution_ids;i&&i.send_to&&(s=Array.isArray(i.send_to)?i.send_to:[i.send_to],delete i.send_to);var n=s.filter((t=>this.STATE.initializedTargets.has(t)));0===n.length&&this.CONFIG.attribution_ids.length>0&&(n=[this.CONFIG.attribution_ids[0]]);var a=this.STATE.isFirstVisit,o=this.STATE.isNewVisit,h=this.lt(t,i);return n.forEach((t=>{var i=e(e({},h),{},{attribution_id:t}),s={method:"POST",url:this.CONFIG.api_host+this.CONFIG.api_endpoint,data:i,compression:this.CONFIG.disable_compression?void 0:"gzip-js",batchKey:t};r&&r.transport&&(s.transport=r.transport),this.CONFIG.request_batching&&!r.send_instantly?this._requestQueue.enqueue(s):this.ot(s)})),a&&(this.STATE.isFirstVisit=!1),o&&(this.STATE.isNewVisit=!1),this.sessionManager&&this.sessionManager.refreshSessionTimer(),!0}lt(t,i){var s,n;void 0===i&&(i={});var a=e(e({},i),{},{[G]:t}),u={[K]:this.STATE.clientId,[X]:this.STATE.sessionId,[V]:this.STATE.sessionNumber||1,[$]:this.STATE.sessionEngaged?1:0,[H]:Math.floor(Date.now()/1e3)};Object.entries(u).forEach((t=>{var[i,e]=t;a.hasOwnProperty(i)||(a[i]=e)}));var c=(function(){if(!d)return{};var t,i,e,[s,n]=(function(t){for(var i=0;i<gi.length;i++){var[e,r]=gi[i],s=e.exec(t),n=s&&(b(r)?r(s,t):r);if(n)return n}return["",""]})(d);return j({lib:"web",lib_version:f,event_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),event_time:Date.now()/1e3,page_location:D(null==h?void 0:h.href,[],_i),page_hostname:null==h?void 0:h.host,page_path:null==h?void 0:h.pathname,os_name:s,os_version:n,browser:di(d,navigator.vendor),device:pi(d),device_type:(i=d,e=pi(i),e===Tt||e===kt||"Kobo"===e||"Kindle Fire"===e||e===ri?F:e===Kt||e===Ht||e===Xt||e===ti?"Console":e===It?"Wearable":e?J:"Desktop").toLowerCase(),timezone:yi(),timezone_offset:Si(),raw_user_agent:d.length>1e3?d.substring(0,997)+"...":d,browser_version:fi(d,navigator.vendor),browser_language:mi(),browser_language_prefix:(t=mi(),"string"==typeof t?t.split("-")[0]:void 0),screen_resolution:(r&&r.screen.width)+"x"+(r&&r.screen.height),viewport_resolution:(r&&r.innerWidth)+"x"+(r&&r.innerHeight)})})();Object.entries(c).forEach((t=>{var[i,e]=t;a[i]||(a[i]=e)}));var l,v,g,p=o?(l=D(o.URL,[],_i),v=tt.concat([]),g={},I(v,(function(t){var i=(function(t,i){for(var e,r=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),s=0;s<r.length;s++){var n=r[s].split("=");if(n[0]===i){e=n;break}}if(!m(e)||e.length<2)return"";var a=e[1];try{a=decodeURIComponent(a)}catch{E.error("Skipping decoding for malformed query param: "+a)}return a.replace(/\+/g," ")})(l,t);g[t]=i||null})),g):{};Object.entries(p).forEach((t=>{var[i,e]=t;e&&!a[i]&&(a[i]=e)})),this.STATE.userId&&(a.user_id=this.STATE.userId);var _=null===(s=this.userManager)||void 0===s?void 0:s.getUserData();_&&Object.keys(_).length>0&&Object.entries(_).forEach((t=>{var[i,e]=t;a[i]||(a[i]=e)})),this.STATE.isNewVisit&&!a[Y]&&(a[Y]=1),this.STATE.isFirstVisit&&!a[Q]&&(a[Q]=1);var y=o&&(null===(n=o.location)||void 0===n?void 0:n.hostname)||"",S=bi(),w=this.STATE.ignoreReferrer;if(S&&"$direct"!==S&&(this.CONFIG.ignore_referrer_domains.includes(S)&&(w=!0),y&&y===S&&(w=!0)),w&&!a[Z]&&(a[Z]=!0),!w&&"$direct"!==S&&!a.page_referrer){var O={page_referrer:o&&o.referrer||"$direct",page_referring_domain:bi()};Object.entries(O).forEach((t=>{var[i,e]=t;a[i]||(a[i]=e)}))}return Object.entries(this.STATE.persistentParameters).forEach((t=>{var[i,e]=t;a[i]||(a[i]=e)})),a.consent_analytics||(a.consent_analytics=this.STATE.consentStatus.analytics),a.consent_advertising||(a.consent_advertising=this.STATE.consentStatus.advertising),a.consent_personalization||(a.consent_personalization=this.STATE.consentStatus.personalization),a}dt(t){try{return new URL(t||"").hostname}catch(t){return""}}ot(t){if(this._retryQueue){var i=t.callback;t.callback=t=>{if("memory"===this.CONFIG.persistence&&t.statusCode<300)try{var e=JSON.parse(t.text);if(e.client_id&&(!this.STATE.clientId||this.STATE.clientId===e.client_id)&&(this.STATE.clientId=e.client_id,this.persistence&&this.persistence_name)){var r=this.persistence.parse(this.persistence_name)||{};r.client_id=e.client_id,this.persistence.set(this.persistence_name,r)}}catch(t){E.error("Error processing server response:",t)}i&&i(t)},this._retryQueue.retriableRequest(t)}else this.j(t)}j(t){if(this.__loaded){if(t.headers=t.headers||{},"sendBeacon"===t.transport&&a&&a.sendBeacon)try{if(a.sendBeacon(t.url,new Blob([JSON.stringify(t.data)],{type:"text/plain"})))return;E.warn("sendBeacon failed, falling back to regular request")}catch(t){E.error("Error in sendBeacon, falling back to regular request:",t)}(t=>{var i,r,s,n=e({},t);n.timeout=n.timeout||6e4,n.url=et(n.url,{_:""+(new Date).getTime(),ver:f,compression:n.compression});var a=null!==(i=n.transport)&&void 0!==i?i:"fetch",o=null!==(r=null===(s=P(nt,(t=>t.transport===a)))||void 0===s?void 0:s.method)&&void 0!==r?r:nt[0].method;if(!o)throw Error("No available transport method");o(n)})(e(e({},t),{},{callback:i=>{var e,r,s;i.statusCode>=400&&(E.error("Request error:",i.statusCode,i.text),null===(r=(s=this.CONFIG).on_request_error)||void 0===r||r.call(s,i)),null===(e=t.callback)||void 0===e||e.call(t,i)}}))}else E.warn("TrustData not initialized, cannot send request")}consent(t,i){if(!this.__loaded)return this.push(["consent",t,i]);if(!i||!i.hasOwnProperty("consent"))return E.error("Invalid consent parameters"),!1;var r=i.consent,s=e({},this.STATE.consentStatus);if("analytics"in r&&(this.STATE.consentStatus.analytics=!0===r.analytics||"granted"===r.analytics),"advertising"in r&&(this.STATE.consentStatus.advertising=!0===r.advertising||"granted"===r.advertising),"personalization"in r&&(this.STATE.consentStatus.personalization=!0===r.personalization||"granted"===r.personalization),this.consentManager instanceof wi&&(this.consentManager.optInOut(this.STATE.consentStatus.analytics),this.STATE.consentStatus.analytics&&this.CONFIG.request_batching&&this._requestQueue.enable(),!0===this.CONFIG.cookieless&&s.analytics!==this.STATE.consentStatus.analytics)){var n=this.STATE.clientId,a=this.STATE.userId;if(this.nt(),this.STATE.consentStatus.analytics){if(n||a){var o=this.persistence.parse(this.persistence_name)||{};n&&(o.client_id=n),a&&(o.user_id=a),this.persistence.set(this.persistence_name,o,this.CONFIG.cookie_expiration,this.CONFIG.cross_subdomain_cookie,this.CONFIG.secure_cookie)}}else if(n){var h=this.persistence.parse(this.persistence_name)||{};h.client_id=n,this.persistence.set(this.persistence_name,h)}}return!0}get(t,i,r){var s,n,a;if("string"==typeof t&&"function"==typeof i&&(r=i,i=t,t=null),!this.__loaded)return this.push(["get",t,i,r]);switch(i){case"client_id":a=this.STATE.clientId;break;case"user_id":a=this.STATE.userId;break;case"session_id":a=null===(s=this.sessionManager)||void 0===s?void 0:s.getSessionId();break;case"user_data":a=(null===(n=this.userManager)||void 0===n?void 0:n.getUserData())||{};break;case"consent_status":a=e({},this.STATE.consentStatus);break;case"debug_mode":a=this.CONFIG.debug;break;default:a=this.STATE.persistentParameters[i]}return"function"==typeof r&&r(a),a}push(t){this.__loaded?m(t)?this.st([t]):b(t)&&t.call(this):r.trustdata&&m(r.trustdata)&&r.trustdata.push(t)}}Ri.prototype.vt=function(){this.CONFIG.send_page_view&&this.__loaded&&this.event(W)},r.ft=r.ft||{},r.ut=!1;var Ii={};!(function(t,i){for(var e=0;e<5;e++)t.prototype[i[e]]=M(t.prototype[i[e]])})(Ri,["event","set","get","consent","push"]),(function(){var t=new Ri;Ii[Ti]=t;var i=r.trustdata;if(i&&m(i)){i.gt&&m(i.gt)&&I(i.gt,(function(e){if(e&&m(e)){var r=e[2]||Ti,s=t.config(e[0],e[1]||{},r);s&&r!==Ti&&i[r]&&m(i[r])&&s.st(i[r])}}));for(var e=[],s=0;s<i.length;s++){var n=i[s];m(n)&&e.push(n)}e.length>0&&t.st(e)}r.trustdata=t,(function(){function t(){t.done||(t.done=!0,Object.values(Ii).forEach((function(t){"function"==typeof t.vt&&t.vt()})))}o&&o.addEventListener?"complete"===o.readyState?t():o.addEventListener("DOMContentLoaded",t,{capture:!1,passive:!0}):r&&E.error("Browser doesn't support `document.addEventListener` so TrustData couldn't be initialized")})()})()})();
